<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö ÌÖçÏä§Ìä∏Î°ú Î∞∞Ïö∞Í∏∞ - –ò–∑—É—á–µ–Ω–∏–µ –∫–æ—Ä–µ–π—Å–∫–æ–≥–æ —Å —Ç–µ–∫—Å—Ç–∞–º–∏</title>
    <link href="css/style.css" rel="stylesheet"/>
    <link rel="stylesheet" href="css/progress.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', 'Malgun Gothic', sans-serif;
            background: 
                linear-gradient(rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9)),
                repeating-linear-gradient(45deg, transparent, transparent 60px, rgba(255,255,255,.03) 60px, rgba(255,255,255,.03) 120px),
                repeating-linear-gradient(-45deg, transparent, transparent 60px, rgba(255,255,255,.03) 60px, rgba(255,255,255,.03) 120px),
                radial-gradient(ellipse at top left, rgba(102, 126, 234, 0.4), transparent 50%),
                radial-gradient(ellipse at bottom right, rgba(118, 75, 162, 0.4), transparent 50%),
                linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: #333;
            margin: 0;
            padding: 0;
            position: relative;
            overflow-x: hidden;
        }

        /* –ü–ª–∞–≤–∞—é—â–∏–µ —Å–≤–µ—Ç–æ–≤—ã–µ –∫—Ä—É–≥–∏ */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.08) 0%, transparent 35%),
                radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.08) 0%, transparent 35%),
                radial-gradient(circle at 50% 50%, rgba(118, 75, 162, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
            animation: float 25s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(3%, -3%) rotate(2deg); }
            66% { transform: translate(-3%, 3%) rotate(-2deg); }
        }

        /* –°–≤–µ—Ç—è—â–∏–µ—Å—è –∞–∫—Ü–µ–Ω—Ç—ã */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse 900px 700px at 15% 25%, rgba(102, 126, 234, 0.2), transparent),
                radial-gradient(ellipse 700px 900px at 85% 75%, rgba(118, 75, 162, 0.2), transparent);
            pointer-events: none;
            z-index: 0;
            animation: glow 15s ease-in-out infinite alternate;
        }

        @keyframes glow {
            0% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.95;
            margin-bottom: 20px;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.2);
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(102, 126, 234, 0.5);
            color: #667eea;
            padding: 12px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .back-button:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
        }

        .breadcrumb {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.25);
            border-radius: 15px;
            padding: 15px 25px;
            margin-bottom: 30px;
            color: white;
            text-align: center;
            font-size: 1.1em;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .step {
            background: rgba(255,255,255,0.12);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
            color: rgba(255,255,255,0.8);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .step.active {
            background: rgba(255,255,255,0.95);
            color: #667eea;
            border-color: white;
            box-shadow: 0 4px 15px rgba(255,255,255,0.3);
        }

        .step.completed {
            background: rgba(76, 175, 80, 0.85);
            color: white;
            border-color: #4caf50;
        }

        /* –£—Ä–æ–≤–Ω–∏ */
        .levels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .level-card {
            background: rgba(255,255,255,0.98);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-top: 6px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .level-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.04) 0%, rgba(255, 255, 255, 0.08) 100%);
            z-index: 0;
        }

        .level-card > * {
            position: relative;
            z-index: 1;
        }

        .level-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 20px 50px rgba(102, 126, 234, 0.25);
        }

        .level-1 { border-top-color: #4caf50; }
        .level-2 { border-top-color: #8bc34a; }
        .level-3 { border-top-color: #ffc107; }
        .level-4 { border-top-color: #ff9800; }
        .level-5 { border-top-color: #f44336; }
        .level-6 { border-top-color: #9c27b0; }

        .level-number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .level-name {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .level-korean {
            font-size: 1.1em;
            color: #667eea;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .level-description {
            color: #666;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .level-texts-count {
            background: rgba(102, 126, 234, 0.12);
            color: #667eea;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .category-card {
            background: rgba(255,255,255,0.98);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.04) 0%, rgba(255, 255, 255, 0.08) 100%);
            z-index: 0;
        }

        .category-card > * {
            position: relative;
            z-index: 1;
        }

        .category-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 20px 50px rgba(102, 126, 234, 0.25);
        }

        .category-icon {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .category-name {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .category-korean {
            font-size: 1.1em;
            color: #667eea;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .category-description {
            color: #666;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .category-texts-count {
            background: rgba(102, 126, 234, 0.12);
            color: #667eea;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        /* –°–ø–∏—Å–æ–∫ —Ç–µ–∫—Å—Ç–æ–≤ */
        .texts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .text-card {
            background: rgba(255,255,255,0.98);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            border-left: 6px solid #667eea;
        }

        .text-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.03) 0%, rgba(255, 255, 255, 0.1) 100%);
            z-index: 0;
        }

        .text-card > * {
            position: relative;
            z-index: 1;
        }

        .text-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 50px rgba(118, 75, 162, 0.25);
            border-left-color: #764ba2;
        }

        .text-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .text-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
            line-height: 1.3;
        }

        .text-subtitle {
            font-size: 1em;
            color: #667eea;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .text-preview {
            color: #666;
            line-height: 1.5;
            margin-bottom: 20px;
            font-size: 0.95em;
        }

        /* Progress Indicators */
        .text-card.completed {
            border-left: 6px solid #4caf50;
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(255, 255, 255, 0.1) 100%);
        }

        .completion-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #4caf50, #66bb6a);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
            z-index: 10;
        }

        .progress-info {
            font-size: 0.85em;
            color: #4caf50;
            margin-top: 8px;
            font-weight: 500;
        }

        .progress-info.not-completed {
            color: #999;
        }

        .text-card:not(.completed) {
            opacity: 0.95;
        }

        .text-card:not(.completed):hover {
            opacity: 1;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        @media (max-width: 768px) {
            .levels-grid, .categories-grid, .texts-grid {
                grid-template-columns: 1fr;
            }
            
            .step-indicator {
                gap: 10px;
            }
            
            .step {
                padding: 8px 15px;
                font-size: 0.9em;
            }

            .back-button {
                position: relative;
                margin: 20px auto;
                display: inline-block;
            }

            .text-card {
                padding: 20px;
            }
        }
    </style>
    
    <!-- Progress Tracking -->
    <script src="js/progress-tracker.js"></script>
    <script src="js/progress-dashboard.js"></script>
</head>
<body>
    <a href="index.html" class="back-button">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    <button class="back-button" id="backBtn" style="top: 20px; left: 200px; border: none; cursor: pointer;">‚Üê –ù–∞–∑–∞–¥</button>
    
    <div class="container">
        <div class="header">
            <h1>üìö ÌÖçÏä§Ìä∏Î°ú Î∞∞Ïö∞Í∏∞</h1>
            <div class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å, –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ —Ç–µ–∫—Å—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</div>
        </div>

        <!-- Progress Dashboard -->
        <div id="progressDashboard"></div>

        <div class="step-indicator">
            <div class="step active" id="step1">1. –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è</div>
            <div class="step" id="step2">2. –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–µ–∫—Å—Ç–æ–≤</div>
            <div class="step" id="step3">3. –í—ã–±–æ—Ä —Ç–µ–∫—Å—Ç–∞</div>
            <div class="step" id="step4">4. –ß—Ç–µ–Ω–∏–µ</div>
        </div>

        <div class="breadcrumb" id="breadcrumb">
            –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —É—Ä–æ–≤–µ–Ω—å –∫–æ—Ä–µ–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω—è -->
        <div class="page active" id="levelsPage">
            <div class="levels-grid">
                <div class="level-card level-1" onclick="selectLevel(1)">
                    <div class="level-number">1Í∏â</div>
                    <div class="level-name">–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π</div>
                    <div class="level-korean">Ï¥àÍ∏â</div>
                    <div class="level-description">
                        –ê–ª—Ñ–∞–≤–∏—Ç —Ö–∞–Ω–≥—ã–ª—å, –±–∞–∑–æ–≤—ã–µ —Ñ—Ä–∞–∑—ã, –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
                    </div>
                    <div class="level-texts-count">19 —Ç–µ–∫—Å—Ç–æ–≤</div>
                </div>

                <div class="level-card level-2" onclick="selectLevel(2)">
                    <div class="level-number">2Í∏â</div>
                    <div class="level-name">–ë–∞–∑–æ–≤—ã–π</div>
                    <div class="level-korean">Í∏∞Ï¥à</div>
                    <div class="level-description">
                        –ü—Ä–æ—Å—Ç—ã–µ –¥–∏–∞–ª–æ–≥–∏, –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–∞—è –ª–µ–∫—Å–∏–∫–∞, –±–∞–∑–æ–≤–∞—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞
                    </div>
                    <div class="level-texts-count">12 —Ç–µ–∫—Å—Ç–æ–≤</div>
                </div>

                <div class="level-card level-3" onclick="selectLevel(3)">
                    <div class="level-number">3Í∏â</div>
                    <div class="level-name">–°—Ä–µ–¥–Ω–∏–π</div>
                    <div class="level-korean">Ï§ëÍ∏â</div>
                    <div class="level-description">
                        –ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞, —É—á–µ–±–∞, —Ö–æ–±–±–∏
                    </div>
                    <div class="level-texts-count">15 —Ç–µ–∫—Å—Ç–æ–≤</div>
                </div>

                <div class="level-card level-4" onclick="selectLevel(4)">
                    <div class="level-number">4Í∏â</div>
                    <div class="level-name">–°—Ä–µ–¥–Ω–µ-–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</div>
                    <div class="level-korean">Ï§ëÍ≥†Í∏â</div>
                    <div class="level-description">
                        –°–ª–æ–∂–Ω–∞—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞, –¥–µ–ª–æ–≤–æ–µ –æ–±—â–µ–Ω–∏–µ, –∫—É–ª—å—Ç—É—Ä–∞
                    </div>
                    <div class="level-texts-count">18 —Ç–µ–∫—Å—Ç–æ–≤</div>
                </div>

                <div class="level-card level-5" onclick="selectLevel(5)">
                    <div class="level-number">5Í∏â</div>
                    <div class="level-name">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</div>
                    <div class="level-korean">Í≥†Í∏â</div>
                    <div class="level-description">
                        –°–≤–æ–±–æ–¥–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ, –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ª–µ–∫—Å–∏–∫–∞
                    </div>
                    <div class="level-texts-count">22 —Ç–µ–∫—Å—Ç–∞</div>
                </div>

                <div class="level-card level-6" onclick="selectLevel(6)">
                    <div class="level-number">6Í∏â</div>
                    <div class="level-name">–ú–∞—Å—Ç–µ—Ä—Å–∫–∏–π</div>
                    <div class="level-korean">ÏµúÍ≥†Í∏â</div>
                    <div class="level-description">
                        –£—Ä–æ–≤–µ–Ω—å –Ω–æ—Å–∏—Ç–µ–ª—è —è–∑—ã–∫–∞, –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ–º—ã
                    </div>
                    <div class="level-texts-count">25 —Ç–µ–∫—Å—Ç–æ–≤</div>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
        <div class="page" id="categoriesPage">
            <div class="categories-grid">
                <div class="category-card" onclick="selectCategory('personal')">
                    <div class="category-icon">üë§</div>
                    <div class="category-name">–û —Å–µ–±–µ</div>
                    <div class="category-korean">ÏûêÍ∏∞ÏÜåÍ∞ú</div>
                    <div class="category-description">
                        –†–∞—Å—Å–∫–∞–∑—ã –æ —Å–µ–º—å–µ, —Ö–æ–±–±–∏, –ø–ª–∞–Ω–∞—Ö, –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –∂–∏–∑–Ω–∏
                    </div>
                    <div class="category-texts-count" id="personalCount">3 —Ç–µ–∫—Å—Ç–∞</div>
                </div>

                <div class="category-card" onclick="selectCategory('stories')">
                    <div class="category-icon">üìñ</div>
                    <div class="category-name">–†–∞—Å—Å–∫–∞–∑—ã</div>
                    <div class="category-korean">Ïù¥ÏïºÍ∏∞</div>
                    <div class="category-description">
                        –ö–æ—Ä–æ—Ç–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏, —Å–∫–∞–∑–∫–∏, –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
                    </div>
                    <div class="category-texts-count" id="storiesCount">2 —Ç–µ–∫—Å—Ç–∞</div>
                </div>

                <div class="category-card" onclick="selectCategory('culture')">
                    <div class="category-icon">üèõÔ∏è</div>
                    <div class="category-name">–ö—É–ª—å—Ç—É—Ä–∞</div>
                    <div class="category-korean">Î¨∏Ìôî</div>
                    <div class="category-description">
                        –ö–æ—Ä–µ–π—Å–∫–∏–µ —Ç—Ä–∞–¥–∏—Ü–∏–∏, –ø—Ä–∞–∑–¥–Ω–∏–∫–∏, –∏—Å–∫—É—Å—Å—Ç–≤–æ, K-POP
                    </div>
                    <div class="category-texts-count" id="cultureCount">4 —Ç–µ–∫—Å—Ç–∞</div>
                </div>

                <div class="category-card" onclick="selectCategory('science')">
                    <div class="category-icon">üî¨</div>
                    <div class="category-name">–ù–∞—É–∫–∞</div>
                    <div class="category-korean">Í≥ºÌïô</div>
                    <div class="category-description">
                        –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –æ—Ç–∫—Ä—ã—Ç–∏—è, –∑–¥–æ—Ä–æ–≤—å–µ, –ø—Ä–∏—Ä–æ–¥–∞
                    </div>
                    <div class="category-texts-count" id="scienceCount">0 —Ç–µ–∫—Å—Ç–æ–≤</div>
                </div>

                <div class="category-card" onclick="selectCategory('travel')">
                    <div class="category-icon">‚úàÔ∏è</div>
                    <div class="category-name">–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</div>
                    <div class="category-korean">Ïó¨Ìñâ</div>
                    <div class="category-description">
                        –ì–æ—Ä–æ–¥–∞ –ö–æ—Ä–µ–∏, –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –ø—É—Ç–µ–≤—ã–µ –∑–∞–º–µ—Ç–∫–∏
                    </div>
                    <div class="category-texts-count" id="travelCount">0 —Ç–µ–∫—Å—Ç–æ–≤</div>
                </div>

                <div class="category-card" onclick="selectCategory('food')">
                    <div class="category-icon">üçú</div>
                    <div class="category-name">–ï–¥–∞</div>
                    <div class="category-korean">ÏùåÏãù</div>
                    <div class="category-description">
                        –ö–æ—Ä–µ–π—Å–∫–∞—è –∫—É—Ö–Ω—è, —Ä–µ—Ü–µ–ø—Ç—ã, —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã, —Ç—Ä–∞–¥–∏—Ü–∏–∏
                    </div>
                    <div class="category-texts-count" id="foodCount">4 —Ç–µ–∫—Å—Ç–∞</div>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ —Ç–µ–∫—Å—Ç–∞ -->
        <div class="page" id="textsPage">
            <div class="texts-grid" id="textsGrid">
                <!-- –¢–µ–∫—Å—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
    </div>

    <script>
        let selectedLevel = null;
        let selectedCategory = null;

        const categoryNames = {
            personal: '–û —Å–µ–±–µ',
            stories: '–†–∞—Å—Å–∫–∞–∑—ã',
            culture: '–ö—É–ª—å—Ç—É—Ä–∞',
            science: '–ù–∞—É–∫–∞',
            travel: '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è',
            food: '–ï–¥–∞'
        };

        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ —Å –ø—Ä–µ–≤—å—é
        const textsDatabase = {
            1: {
                personal: [
                    {
                        id: 'personal-1',
                        title: "–ú–æ–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –ö–æ—Ä–µ–µ–π",
                        subtitle: "ÌïúÍµ≠Í≥ºÏùò Ï≤´ ÎßåÎÇ®",
                        preview: "–ò—Å—Ç–æ—Ä–∏—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å –∫–æ—Ä–µ–π—Å–∫–∏–º —è–∑—ã–∫–æ–º —á–µ—Ä–µ–∑ –¥–æ—Ä–∞–º—ã. –ü–ª–∞–Ω—ã –ø–æ–µ–∑–¥–∫–∏ –≤ –°–µ—É–ª –∏ –æ–±—â–µ–Ω–∏–µ –Ω–∞ –∫–æ—Ä–µ–π—Å–∫–æ–º."
                    },
                    {
                        id: 'personal-2',
                        title: "–ú–æ—è –∫–æ—Ä–µ–π—Å–∫–∞—è —Å–µ–º—å—è",
                        subtitle: "ÎÇòÏùò ÌïúÍµ≠ Í∞ÄÏ°±",
                        preview: "–†–∞—Å—Å–∫–∞–∑ –æ —Å–µ–º—å–µ –∏–∑ 5 —á–µ–ª–æ–≤–µ–∫: —Ä–æ–¥–∏—Ç–µ–ª–∏, —Å–µ—Å—Ç—Ä–∞-—Å—Ç—É–¥–µ–Ω—Ç–∫–∞ –∏ –±–∞–±—É—à–∫–∞. –ö—Ç–æ —á–µ–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è."
                    },
                    {
                        id: 'personal-3',
                        title: "–ú–æ–∏ —É–≤–ª–µ—á–µ–Ω–∏—è –∏ —Ö–æ–±–±–∏",
                        subtitle: "ÎÇòÏùò Ï∑®ÎØ∏ÏôÄ Í¥ÄÏã¨ÏÇ¨",
                        preview: "–õ—é–±–∏–º—ã–µ –∑–∞–Ω—è—Ç–∏—è: –º—É–∑—ã–∫–∞ K-POP, —á—Ç–µ–Ω–∏–µ –∫–Ω–∏–≥ –∏ —Ñ—É—Ç–±–æ–ª —Å –¥—Ä—É–∑—å—è–º–∏ –ø–æ –≤—ã—Ö–æ–¥–Ω—ã–º."
                    }
                ],
                stories: [
                    {
                        id: 'stories-1',
                        title: "–ó–∞–±–∞–≤–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤ –∫–∞—Ñ–µ",
                        subtitle: "Ïπ¥ÌéòÏóêÏÑú ÏùºÏñ¥ÎÇú Ïû¨ÎØ∏ÏûàÎäî Ïùº",
                        preview: "–ó–∞–±–∞–≤–Ω—ã–π —Å–ª—É—á–∞–π –≤ –∫–æ—à–∞—á—å–µ–º –∫–∞—Ñ–µ. –ë–µ–ª–∞—è –∫–æ—à–∫–∞ —É—Å—Ç—Ä–æ–∏–ª–∞ –ø–µ—Ä–µ–ø–æ–ª–æ—Ö —Å —á–∞—à–∫–æ–π –∫–æ—Ñ–µ!"
                    },
                    {
                        id: 'stories-2',
                        title: "–í—Å—Ç—Ä–µ—á–∞ —Å –¥—Ä—É–≥–æ–º –≤ –ø–∞—Ä–∫–µ",
                        subtitle: "Í≥µÏõêÏóêÏÑú ÏπúÍµ¨ÏôÄÏùò ÎßåÎÇ®",
                        preview: "–í—Å—Ç—Ä–µ—á–∞ —Å–æ —à–∫–æ–ª—å–Ω—ã–º –¥—Ä—É–≥–æ–º –ø–æ—Å–ª–µ —Ç—Ä—ë—Ö –ª–µ—Ç. –†–∞–∑–≥–æ–≤–æ—Ä—ã, –º–æ—Ä–æ–∂–µ–Ω–æ–µ –∏ —Ç—ë–ø–ª—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è."
                    }
                ],
                culture: [
                    {
                        id: 'culture-1',
                        title: "–ö–æ—Ä–µ–π—Å–∫–∏–π –ù–æ–≤—ã–π –≥–æ–¥",
                        subtitle: "ÌïúÍµ≠Ïùò ÏÑ§ÎÇ†",
                        preview: "–°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –ø—Ä–∞–∑–¥–Ω–∏–∫ –ö–æ—Ä–µ–∏. –¢—Ä–∞–¥–∏—Ü–∏–∏: —Ä–∏—Å–æ–≤—ã–π —Å—É–ø, –ø–æ–∫–ª–æ–Ω—ã —Å—Ç–∞—Ä—à–∏–º –∏ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ –¥–µ–Ω—å–≥–∏."
                    },
                    {
                        id: 'culture-2',
                        title: "–•–∞–Ω–≥—ã–ª—å - –∫–æ—Ä–µ–π—Å–∫–∏–π –∞–ª—Ñ–∞–≤–∏—Ç",
                        subtitle: "ÌïúÍ∏Ä - ÌïúÍµ≠Ïùò ÏïåÌååÎ≤≥",
                        preview: "–ò—Å—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Ö–∞–Ω–≥—ã–ª—è –∫–æ—Ä–æ–ª—ë–º –°–µ–¥–∂–æ–Ω–æ–º –≤ 1443 –≥–æ–¥—É. 24 –±—É–∫–≤—ã: 14 —Å–æ–≥–ª–∞—Å–Ω—ã—Ö –∏ 10 –≥–ª–∞—Å–Ω—ã—Ö."
                    },
                    {
                        id: 'culture-3',
                        title: "–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –∫–æ—Å—Ç—é–º –•–∞–Ω–±–æ–∫",
                        subtitle: "Ï†ÑÌÜµ ÏùòÏÉÅ ÌïúÎ≥µ",
                        preview: "–ö—Ä–∞—Å–∏–≤–∞—è —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è –æ–¥–µ–∂–¥–∞. –ß–æ–≥–æ—Ä–∏ –∏ —á—Ö–∏–º–∞ –¥–ª—è –∂–µ–Ω—â–∏–Ω, —á–æ–≥–æ—Ä–∏ –∏ –ø–∞–¥–∂–∏ –¥–ª—è –º—É–∂—á–∏–Ω."
                    },
                    {
                        id: 'culture-4',
                        title: "–ö–æ—Ä–µ–π—Å–∫–æ–µ —Ç–∞—ç–∫–≤–æ–Ω–¥–æ",
                        subtitle: "ÌïúÍµ≠Ïùò ÌÉúÍ∂åÎèÑ",
                        preview: "–ë–æ–µ–≤–æ–µ –∏—Å–∫—É—Å—Å—Ç–≤–æ –ö–æ—Ä–µ–∏. –£–¥–∞—Ä—ã –Ω–æ–≥–∞–º–∏ –∏ —Ä—É–∫–∞–º–∏ –≤ –±–µ–ª–æ–º –¥–æ–±–æ–∫–µ. –° 2000 –≥–æ–¥–∞ –≤ –û–ª–∏–º–ø–∏–∞–¥–µ."
                    }
                ],
                science: [
                    {
                        id: 'science-1',
                        title: "–ü—Ä–æ—Å—Ç–æ–π –Ω–∞—É—á–Ω—ã–π –æ–ø—ã—Ç",
                        subtitle: "Í∞ÑÎã®Ìïú Í≥ºÌïô Ïã§Ìóò",
                        preview: "–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –≤–æ–¥–æ–π –∏ –±—É–º–∞–≥–æ–π. –ü–æ—á–µ–º—É –≤–æ–¥–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç –∏–∑ –ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç–æ–≥–æ —Å—Ç–∞–∫–∞–Ω–∞?"
                    },
                    {
                        id: 'science-2',
                        title: "–ú–∞–≥–Ω–∏—Ç –∏ –º–µ—Ç–∞–ª–ª",
                        subtitle: "ÏûêÏÑùÍ≥º Í∏àÏÜç",
                        preview: "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –æ–ø—ã—Ç —Å –º–∞–≥–Ω–∏—Ç–æ–º. –ß—Ç–æ –ø—Ä–∏–ª–∏–ø–∞–µ—Ç –∫ –º–∞–≥–Ω–∏—Ç—É, –∞ —á—Ç–æ –Ω–µ—Ç? –ú–µ—Ç–∞–ª–ª, –¥–µ—Ä–µ–≤–æ, –ø–ª–∞—Å—Ç–∏–∫."
                    },
                    {
                        id: 'science-3',
                        title: "–õ—ë–¥ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–æ–¥—É",
                        subtitle: "ÏñºÏùåÏù¥ Î¨ºÎ°ú Î≥ÄÌï¥Ïöî",
                        preview: "–ü—Ä–æ—Å—Ç–æ–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç —Å –ª—å–¥–æ–º. –ù–∞–±–ª—é–¥–∞–µ–º –∫–∞–∫ –ª—ë–¥ —Ç–∞–µ—Ç –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–æ–¥—É."
                    }
                ],
                travel: [
                    {
                        id: 'travel-1',
                        title: "–ü–µ—Ä–≤–∞—è –ø–æ–µ–∑–¥–∫–∞ –≤ –°–µ—É–ª",
                        subtitle: "Ï≤´ ÏÑúÏö∏ Ïó¨Ìñâ",
                        preview: "–ú–µ—á—Ç–∞ –æ –ø–µ—Ä–≤–æ–π –ø–æ–µ–∑–¥–∫–µ –≤ –ö–æ—Ä–µ—é. –ö—ë–Ω–±–æ–∫–∫—É–Ω, –±–∞—à–Ω—è, –ø–∏–±–∏–º–ø–∞–ø –∏ —Ç—Ç–æ–∫–ø–æ–∫–∫–∏. –ù–µ–¥–µ–ª—è –≤ –°–µ—É–ª–µ!"
                    },
                    {
                        id: 'travel-2',
                        title: "–í –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º –ø–∞—Ä–∫–µ",
                        subtitle: "Íµ≠Î¶ΩÍ≥µÏõêÏóêÏÑú",
                        preview: "–ü–æ—Ö–æ–¥ –≤ –≥–æ—Ä—ã —Å —Å–µ–º—å—ë–π. –ü—Ä–µ–∫—Ä–∞—Å–Ω—ã–π –≤–∏–¥, –∫–∏–º–ø–∞–ø –Ω–∞ –≤–µ—Ä—à–∏–Ω–µ –∏ –≤—Å—Ç—Ä–µ—á–∞ —Å –æ–ª–µ–Ω–µ–º!"
                    },
                    {
                        id: 'travel-3',
                        title: "–ù–∞ —Ä—ã–Ω–∫–µ –ù–∞–º–¥–µ–º—É–Ω",
                        subtitle: "ÎÇ®ÎåÄÎ¨∏ ÏãúÏû•ÏóêÏÑú",
                        preview: "–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –∫–æ—Ä–µ–π—Å–∫–∏–π —Ä—ã–Ω–æ–∫. –¢—Ç–æ–∫ –æ—Ç –±–∞–±—É—à–∫–∏, —à–∞—Ä—Ñ—ã –∏ —Å—É–≤–µ–Ω–∏—Ä—ã. –î—Ä—É–∂–µ–ª—é–±–Ω—ã–µ –ø—Ä–æ–¥–∞–≤—Ü—ã!"
                    }
                ],
                food: [
                    {
                        id: 'food-1',
                        title: "–ú–æ—è –ª—é–±–∏–º–∞—è –∫–æ—Ä–µ–π—Å–∫–∞—è –µ–¥–∞",
                        subtitle: "Ï†úÍ∞Ä Ï¢ãÏïÑÌïòÎäî ÌïúÍµ≠ ÏùåÏãù",
                        preview: "–õ—é–±–∏–º—ã–µ –±–ª—é–¥–∞: –ø–∏–±–∏–º–ø–∞–ø —Å –æ–≤–æ—â–∞–º–∏ –∏ —è–π—Ü–æ–º, –æ—Å—Ç—Ä—ã–π –∫–æ—á—Ö—É–¥–∂–∞–Ω. –ö–∏–º—á–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!"
                    },
                    {
                        id: 'food-2',
                        title: "–í –∫–æ—Ä–µ–π—Å–∫–æ–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ",
                        subtitle: "ÌïúÍµ≠ ÏãùÎãπÏóêÏÑú",
                        preview: "–ü–æ—Å–µ—â–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!', –º–µ–Ω—é –∏ –∑–∞–∫–∞–∑ —Å–∞–º–≥—ë—Ç—Ö–∞–Ω–∞."
                    },
                    {
                        id: 'food-3',
                        title: "–£—á—É—Å—å –≥–æ—Ç–æ–≤–∏—Ç—å –∫–∏–º—á–∏",
                        subtitle: "ÍπÄÏπò ÎßåÎì§Í∏∞Î•º Î∞∞ÏõåÏöî",
                        preview: "–ú–∞–º–∞ —É—á–∏—Ç –¥–µ–ª–∞—Ç—å –∫–∏–º—á–∏. –ó–∞—Å–æ–ª–∫–∞ –∫–∞–ø—É—Å—Ç—ã, –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç—Ä–æ–≥–æ —Å–æ—É—Å–∞ —Å —á–µ—Å–Ω–æ–∫–æ–º –∏ –∏–º–±–∏—Ä—ë–º."
                    },
                    {
                        id: 'food-4',
                        title: "–ö–æ—Ä–µ–π—Å–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏",
                        subtitle: "ÌïúÍµ≠Ïùò ÏùåÎ£å",
                        preview: "–í–∫—É—Å–Ω—ã–µ –∫–æ—Ä–µ–π—Å–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏: —Ö–æ–ª–æ–¥–Ω—ã–π —Å–∏–∫—Ö–µ, –≥–æ—Ä—è—á–∏–π —é–¥–∂–∞ —á—Ö–∞ –∏ –ø–æ–ø—É–ª—è—Ä–Ω–æ–µ –±–∞–Ω–∞–Ω–æ–≤–æ–µ –º–æ–ª–æ–∫–æ."
                    }
                ]
            }
        };

        function selectLevel(level, options = {}) {
            const { skipHistory = false } = options;
            selectedLevel = level;
            
            document.getElementById('step1').classList.add('completed');
            document.getElementById('step1').classList.remove('active');
            document.getElementById('step2').classList.add('active');
            
            document.getElementById('breadcrumb').textContent = `–£—Ä–æ–≤–µ–Ω—å ${level}Í∏â - –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ç–µ–∫—Å—Ç–æ–≤`;
            
            updateCategoryCounts(level);
            
            document.getElementById('levelsPage').classList.remove('active');
            document.getElementById('categoriesPage').classList.add('active');

            if (!skipHistory) {
                const newUrl = `${window.location.pathname}?level=${selectedLevel}`;
                window.history.pushState({}, '', newUrl);
            }
        }

        function updateCategoryCounts(level) {
            const levelData = textsDatabase[level] || {};
            
            document.getElementById('personalCount').textContent = 
                `${(levelData.personal || []).length} —Ç–µ–∫—Å—Ç–æ–≤`;
            document.getElementById('storiesCount').textContent = 
                `${(levelData.stories || []).length} —Ç–µ–∫—Å—Ç–æ–≤`;
            document.getElementById('cultureCount').textContent = 
                `${(levelData.culture || []).length} —Ç–µ–∫—Å—Ç–æ–≤`;
            document.getElementById('scienceCount').textContent = 
                `${(levelData.science || []).length} —Ç–µ–∫—Å—Ç–æ–≤`;
            document.getElementById('travelCount').textContent = 
                `${(levelData.travel || []).length} —Ç–µ–∫—Å—Ç–∞`;
            document.getElementById('foodCount').textContent = 
                `${(levelData.food || []).length} —Ç–µ–∫—Å—Ç–æ–≤`;
        }

        function selectCategory(category, options = {}) {
            const { skipHistory = false } = options;

            if (!categoryNames[category]) {
                console.warn(`–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: ${category}`);
                return;
            }

            selectedCategory = category;
            
            document.getElementById('step2').classList.add('completed');
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step3').classList.add('active');
            
            document.getElementById('breadcrumb').textContent =
                `–£—Ä–æ–≤–µ–Ω—å ${selectedLevel}Í∏â ‚Üí ${categoryNames[category]} - –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–∫—Å—Ç`;
            
            loadTextsPage();
            
            document.getElementById('categoriesPage').classList.remove('active');
            document.getElementById('textsPage').classList.add('active');

            if (!skipHistory) {
                const newUrl = `${window.location.pathname}?level=${selectedLevel}&category=${category}`;
                window.history.pushState({}, '', newUrl);
            }
        }

        function loadTextsPage() {
            const textsGrid = document.getElementById('textsGrid');
            const levelData = textsDatabase[selectedLevel] || {};
            const categoryTexts = levelData[selectedCategory] || [];
            
            if (categoryTexts.length === 0) {
                textsGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
                        <div style="font-size: 3em; margin-bottom: 20px;">üìù</div>
                        <h3 style="color: white; margin-bottom: 15px;">–¢–µ–∫—Å—Ç—ã —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è</h3>
                        <p style="color: rgba(255,255,255,0.8);">
                            –ú—ã –∞–∫—Ç–∏–≤–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Ç–µ–∫—Å—Ç—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é!
                        </p>
                        <button onclick="goBack()" style="
                            background: rgba(255,255,255,0.2);
                            border: 1px solid rgba(255,255,255,0.3);
                            color: white;
                            padding: 12px 24px;
                            border-radius: 25px;
                            cursor: pointer;
                            margin-top: 20px;
                        ">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</button>
                    </div>
                `;
                return;
            }
            
            let html = '';
            categoryTexts.forEach((text, index) => {
                let imageHtml = '';
                const imageMap = {
                    'personal-1': '—Ñ–ª–∞–≥.jpg',
                    'personal-2': 'OIP.jpg',
                    'personal-3': 'OIP (1).jpg',
                    'culture-1': '–Ω–æ–≤—ã–π –≥–æ–¥.jpg',
                    'culture-2': '—Ö–∞–Ω–≥—ã–ª—å.jpg',
                    'culture-3': '–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –∫–æ—Å—Ç—é–º –•–∞–Ω–±–æ–∫.jpg',
                    'culture-4': '—Ñ–ª–∞–≥.jpg',
                    'stories-1': '–∫–æ—à–∫–∞ –±–µ–ª–∞—è –≤ –∫–∞—Ñ–µ.jpg',
                    'stories-2': '–≤—Å—Ç—Ä–µ—á–∞ —Å –¥—Ä—É–≥–æ–º.jpg',
                    'science-1': '—Å—Ç–∞–∫–∞–Ω.jpg',
                    'science-2': '–º–∞–≥–Ω–∏—Ç.jpg',
                    'science-3': '–õ—ë–¥ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≤–æ–¥—É.jpg',
                    'travel-1': '—Å–µ—É–ª.jpg',
                    'travel-2': '–û–ª–µ–Ω–µ–Ω–æ–∫ –≤ —Ç—Ä–∞–≤–µ_ –û–ª–µ–Ω–µ–Ω–æ–∫ –≤ –ª–µ—Å—É.jpg',
                    'travel-3': '–ù–∞ —Ä—ã–Ω–∫–µ –ù–∞–º–¥–µ–º—É–Ω.jpg',
                    'food-1': '–±–∏–±–∏–º–ø–∞–±.jpg',
                    'food-2': '–í –∫–æ—Ä–µ–π—Å–∫–æ–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ.jpg',
                    'food-3': '–£—á—É—Å—å –≥–æ—Ç–æ–≤–∏—Ç—å –∫–∏–º—á–∏.jpg',
                    'food-4': '–ö–æ—Ä–µ–π—Å–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏.jpg'
                };
                
                if (imageMap[text.id]) {
                    imageHtml = `
                        <div class="text-image">
                            <img src="images/${imageMap[text.id]}" alt="${text.title}" style="width: 60px; height: 40px; object-fit: cover; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.3);">
                        </div>
                    `;
                }
                
                html += `
                    <div class="text-card" onclick="selectText('${text.id}')">
                        <div class="text-number">${index + 1}</div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="flex: 1;">
                                <div class="text-title">${text.title}</div>
                                <div class="text-subtitle">${text.subtitle}</div>
                                <div class="text-preview">${text.preview}</div>
                            </div>
                            ${imageHtml}
                        </div>
                    </div>
                `;
            });
            
            textsGrid.innerHTML = html;
        }

        function selectText(textId) {
            document.getElementById('step3').classList.add('completed');
            document.getElementById('step3').classList.remove('active');
            document.getElementById('step4').classList.add('active');
            
            window.location.href = `reading-content.html?level=${selectedLevel}&category=${selectedCategory}&textId=${textId}`;
        }

        function goBack() {
            goBackToCategories();
        }

        function restoreStateFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const levelParam = urlParams.get('level');
            const categoryParam = urlParams.get('category');

            if (levelParam) {
                const parsedLevel = parseInt(levelParam, 10);

                if (!isNaN(parsedLevel)) {
                    selectLevel(parsedLevel, { skipHistory: true });

                    if (categoryParam) {
                        selectCategory(categoryParam, { skipHistory: true });
                        console.log(`–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: –£—Ä–æ–≤–µ–Ω—å ${selectedLevel}, –ö–∞—Ç–µ–≥–æ—Ä–∏—è ${selectedCategory}`);
                    }
                }
            }
        }

        function setupSmartBackButton() {
            const backBtn = document.getElementById('backBtn');
            
            backBtn.addEventListener('click', function(e) {
                e.preventDefault();
                
                const levelsPageActive = document.getElementById('levelsPage').classList.contains('active');
                const categoriesPageActive = document.getElementById('categoriesPage').classList.contains('active');
                const textsPageActive = document.getElementById('textsPage').classList.contains('active');
                
                if (textsPageActive) {
                    goBackToCategories();
                } else if (categoriesPageActive) {
                    goBackToLevels();
                } else if (levelsPageActive) {
                    window.location.href = 'index.html';
                }
            });
        }
        
        function goBackToCategories() {
            document.getElementById('step3').classList.remove('active');
            document.getElementById('step2').classList.add('active');
            document.getElementById('step2').classList.remove('completed');
            
            document.getElementById('breadcrumb').textContent = 
                `–£—Ä–æ–≤–µ–Ω—å ${selectedLevel}Í∏â - –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ç–µ–∫—Å—Ç–æ–≤`;
            
            document.getElementById('textsPage').classList.remove('active');
            document.getElementById('categoriesPage').classList.add('active');
            
            const newUrl = `${window.location.pathname}?level=${selectedLevel}`;
            window.history.pushState({}, '', newUrl);
        }
        
        function goBackToLevels() {
            document.getElementById('step2').classList.remove('active');
            document.getElementById('step1').classList.add('active');
            document.getElementById('step1').classList.remove('completed');
            
            document.getElementById('breadcrumb').textContent = 
                '–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —É—Ä–æ–≤–µ–Ω—å –∫–æ—Ä–µ–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞';
            
            document.getElementById('categoriesPage').classList.remove('active');
            document.getElementById('levelsPage').classList.add('active');
            
            const newUrl = window.location.pathname;
            window.history.pushState({}, '', newUrl);
            
            selectedLevel = null;
            selectedCategory = null;
        }

        function markCompletedTexts() {
            if (typeof ProgressTracker === 'undefined') {
                console.warn('[WARN] ProgressTracker not loaded');
                return;
            }
            
            const progress = ProgressTracker.get();
            console.log('[OK] Loading progress for texts');
            
            document.querySelectorAll('.text-card').forEach(card => {
                const onclick = card.getAttribute('onclick');
                if (!onclick) return;
                
                const match = onclick.match(/selectText\('([^']+)'\)/);
                if (!match) return;
                
                const textId = match[1];
                const key = `${selectedLevel}-${selectedCategory}-${textId}`;
                
                if (progress.completedTexts[key]) {
                    card.classList.add('completed');
                    
                    const badge = document.createElement('div');
                    badge.className = 'completion-badge';
                    badge.innerHTML = '&#10003;';
                    card.style.position = 'relative';
                    card.insertBefore(badge, card.firstChild);
                    
                    const progressInfo = document.createElement('div');
                    progressInfo.className = 'progress-info';
                    const data = progress.completedTexts[key];
                    const date = new Date(data.completedAt).toLocaleDateString('uk-UA');
                    progressInfo.innerHTML = `–ü—Ä–æ–π–¥–µ–Ω–æ ${date} | –†–µ–∑—É–ª—å—Ç–∞—Ç: ${data.quizScore}%`;
                    card.appendChild(progressInfo);
                    
                    console.log('[+] Marked completed:', textId);
                } else {
                    const progressInfo = document.createElement('div');
                    progressInfo.className = 'progress-info not-completed';
                    progressInfo.innerHTML = '–ù–µ –ø—Ä–æ–π–¥–µ–Ω–æ';
                    card.appendChild(progressInfo);
                }
            });
            
            console.log('[OK] Completed texts marked');
        }

        const originalLoadTextsPage = loadTextsPage;
        loadTextsPage = function() {
            originalLoadTextsPage.call(this);
            setTimeout(markCompletedTexts, 150);
        };

        document.addEventListener('DOMContentLoaded', function() {
            if (typeof ProgressDashboard !== 'undefined') {
                ProgressDashboard.render('progressDashboard');
            }
            
            restoreStateFromURL();
            
            setupSmartBackButton();
            
            const cards = document.querySelectorAll('.level-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.4s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>
