<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Урок 20: Общество и политика (사회와 정치)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2d3436, #636e72, #00b894, #0984e3);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .nav {
            background: rgba(255,255,255,0.95);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .nav a {
            background: #2d3436;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 10px;
            margin: 0 10px;
            display: inline-block;
            transition: all 0.3s;
        }
        
        .nav a:hover {
            background: #636e72;
            transform: translateY(-2px);
        }
        
        .lesson-header {
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .lesson-header h1 {
            font-size: 2.5em;
            color: #2d3436;
            margin-bottom: 10px;
        }
        
        .politics-scene {
            position: relative;
            height: 120px;
            margin: 20px 0;
            overflow: hidden;
            border-radius: 15px;
            background: linear-gradient(to bottom, #e8f4fd, #d1ecf1);
        }
        
        .politics-icon {
            position: absolute;
            font-size: 2.5em;
            animation: march 10s linear infinite;
        }
        
        .politics1 {
            top: 20px;
            left: 5%;
            animation-delay: 0s;
        }
        
        .politics2 {
            top: 50px;
            left: 25%;
            animation-delay: -2s;
        }
        
        .politics3 {
            top: 30px;
            left: 45%;
            animation-delay: -4s;
        }
        
        .politics4 {
            top: 10px;
            left: 65%;
            animation-delay: -6s;
        }
        
        .politics5 {
            top: 40px;
            left: 85%;
            animation-delay: -8s;
        }
        
        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .society-card {
            background: rgba(255,255,255,0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .society-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--card-color, #2d3436);
        }
        
        .society-card.government::before { background: linear-gradient(90deg, #2d3436, #636e72); }
        .society-card.democracy::before { background: linear-gradient(90deg, #0984e3, #74b9ff); }
        .society-card.law::before { background: linear-gradient(90deg, #6c5ce7, #a29bfe); }
        .society-card.economy::before { background: linear-gradient(90deg, #00b894, #00cec9); }
        .society-card.social::before { background: linear-gradient(90deg, #fdcb6e, #e17055); }
        
        .society-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .society-emoji {
            font-size: 3em;
            text-align: center;
            margin-bottom: 10px;
            animation: political-pulse 4s ease-in-out infinite;
        }
        
        .korean-word {
            font-size: 1.8em;
            font-weight: bold;
            color: #2d3436;
            margin-bottom: 5px;
            text-align: center;
        }
        
        .pronunciation {
            font-size: 1.1em;
            color: #0984e3;
            margin-bottom: 10px;
            font-style: italic;
            text-align: center;
        }
        
        .translation {
            font-size: 1em;
            color: #666;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .political-context {
            background: #f0f8ff;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.85em;
            color: #0984e3;
            margin: 8px 0;
            border-left: 3px solid #2d3436;
        }
        
        .example-sentence {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid #2d3436;
            font-size: 0.9em;
        }
        
        .korean-sentence {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .speak-btn {
            background: #2d3436;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
            font-size: 0.9em;
            color: white;
        }
        
        .speak-btn:hover {
            background: #636e72;
        }
        
        .study-mode {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            background: #2d3436;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mode-btn.active {
            background: #0984e3;
        }
        
        .filter-section {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            background: rgba(255,255,255,0.9);
            border: 2px solid #ddd;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-btn.active {
            background: #2d3436;
            color: white;
            border-color: #2d3436;
        }
        
        .korean-politics {
            background: rgba(255,255,255,0.95);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .politics-fact {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px;
            border-radius: 10px;
            border-left: 4px solid #2d3436;
            display: inline-block;
            min-width: 250px;
            text-align: left;
        }
        
        .flashcard {
            background: rgba(255,255,255,0.95);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 20px;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .flashcard:hover {
            transform: rotateY(3deg) scale(1.02);
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .flashcard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #2d3436, #636e72);
            border-radius: 20px 20px 0 0;
        }
        
        @keyframes march {
            0% { transform: translateX(-50px); }
            100% { transform: translateX(calc(100vw + 50px)); }
        }
        
        @keyframes political-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* Стили для тестов */
        .test-container {
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .test-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .test-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .test-type-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            color: #495057;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .test-type-btn.active,
        .test-type-btn:hover {
            background: #2d3436;
            color: white;
            border-color: #2d3436;
            transform: translateY(-2px);
        }
        
        .test-content {
            min-height: 300px;
        }
        
        .test-question {
            font-size: 1.4em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
            color: #2d3436;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #2d3436;
        }
        
        .test-answers {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .answer-option {
            background: white;
            border: 2px solid #dee2e6;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            text-align: center;
        }
        
        .answer-option:hover {
            border-color: #2d3436;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .answer-option.selected {
            background: #2d3436;
            color: white;
            border-color: #2d3436;
        }
        
        .answer-option.correct {
            background: #00b894;
            color: white;
            border-color: #00b894;
        }
        
        .answer-option.incorrect {
            background: #e17055;
            color: white;
            border-color: #e17055;
        }
        
        .answer-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .answer-input:focus {
            outline: none;
            border-color: #2d3436;
        }
        
        .test-controls {
            text-align: center;
            margin-top: 20px;
        }
        
        .test-result {
            text-align: center;
            background: rgba(255,255,255,0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .result-stats {
            margin: 30px 0;
        }
        
        .result-score {
            font-size: 2em;
            font-weight: bold;
            color: #2d3436;
            margin-bottom: 10px;
        }
        
        .result-percentage {
            font-size: 1.5em;
            color: #0984e3;
        }
        
        .result-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
            text-align: center;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <a href="../index.html">← К 4급</a>
            <a href="../../index.html">🏠 Главная</a>
        </div>
        
        <div class="lesson-header">
            <h1>🏛️ Урок 20: Общество и политика (사회와 정치)</h1>
            <p>Изучаем социальные институты и политические термины</p>
            
            <div class="politics-scene">
                <div class="politics-icon politics1">🏛️</div>
                <div class="politics-icon politics2">⚖️</div>
                <div class="politics-icon politics3">🗳️</div>
                <div class="politics-icon politics4">📊</div>
                <div class="politics-icon politics5">🤝</div>
            </div>
        </div>
        
        <div class="korean-politics">
            <h3>🇰🇷 Политическая система Кореи</h3>
            <div class="politics-fact">
                <strong>대통령제 (Presidential system)</strong><br>
                Президентская республика с разделением властей
            </div>
            <div class="politics-fact">
                <strong>국회 (National Assembly)</strong><br>
                Однопалатный парламент из 300 депутатов
            </div>
            <div class="politics-fact">
                <strong>헌법재판소 (Constitutional Court)</strong><br>
                Конституционный суд защищает основной закон
            </div>
        </div>
        
        <div class="study-mode">
            <button class="mode-btn active" onclick="showVocabulary()">📚 Политический словарь</button>
            <button class="mode-btn" onclick="showFlashcards()">🃏 Карточки</button>
            <button class="mode-btn" onclick="showTests()">🧩 Тесты</button>
        </div>
        
        <div class="filter-section" id="filter-section">
            <button class="filter-btn active" onclick="filterSociety('all')">Все</button>
            <button class="filter-btn" onclick="filterSociety('government')">🏛️ Власть</button>
            <button class="filter-btn" onclick="filterSociety('democracy')">🗳️ Демократия</button>
            <button class="filter-btn" onclick="filterSociety('law')">⚖️ Право</button>
            <button class="filter-btn" onclick="filterSociety('economy')">💰 Экономика</button>
            <button class="filter-btn" onclick="filterSociety('social')">🤝 Общество</button>
        </div>
        
        <div id="vocabulary-section">
            <div class="vocabulary-grid" id="vocabularyGrid">
                <!-- Будет заполнено JS -->
            </div>
        </div>
        
        <div id="flashcard-section" style="display: none;">
            <div class="flashcard" id="flashcard" onclick="flipCard()">
                <div id="flashcard-content">
                    <div class="society-emoji" id="flashcard-emoji">🏛️</div>
                    <div class="korean-word" id="flashcard-korean">정부</div>
                    <button class="speak-btn" onclick="speak(document.getElementById('flashcard-korean').textContent)">🔊</button>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="mode-btn" onclick="prevCard()">← Предыдущая</button>
                <span id="card-counter">1 / 25</span>
                <button class="mode-btn" onclick="nextCard()">Следующая →</button>
            </div>
            <div style="text-align: center; margin-top: 10px; color: #666;">
                <small>Нажмите на карточку для переворота или используйте Пробел</small>
            </div>
        </div>
        
        <div id="test-section" style="display: none;">
            <div class="test-container">
                <div class="test-header">
                    <h3>🧩 Тесты по политической лексике</h3>
                    <div class="test-stats">
                        <span id="test-score">Правильно: 0 / 0</span>
                        <span id="test-progress">Вопрос 1 из 10</span>
                    </div>
                </div>
                
                <div class="test-selector">
                    <button class="test-type-btn active" onclick="startTest('multiple')">📋 Выбор перевода</button>
                    <button class="test-type-btn" onclick="startTest('input')">✏️ Ввод слова</button>
                    <button class="test-type-btn" onclick="startTest('context')">📝 Контекст</button>
                    <button class="test-type-btn" onclick="startTest('listening')">👂 На слух</button>
                </div>
                
                <div id="test-content" class="test-content">
                    <div class="test-question" id="test-question">
                        Выберите тип теста выше
                    </div>
                    <div class="test-answers" id="test-answers">
                        <!-- Будет заполнено JS -->
                    </div>
                    <div class="test-controls" id="test-controls" style="display: none;">
                        <button class="mode-btn" onclick="nextQuestion()">Следующий вопрос →</button>
                        <button class="mode-btn" onclick="showResult()">Показать результат</button>
                    </div>
                </div>
                
                <div id="test-result" class="test-result" style="display: none;">
                    <h3>🎉 Результат теста</h3>
                    <div class="result-stats">
                        <div class="result-score" id="final-score"></div>
                        <div class="result-percentage" id="final-percentage"></div>
                    </div>
                    <div class="result-actions">
                        <button class="mode-btn" onclick="restartTest()">🔄 Пройти ещё раз</button>
                        <button class="mode-btn" onclick="showVocabulary()">📚 К словарю</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const vocabulary = [
            // Власть
            {
                korean: '정부', 
                pronunciation: 'чонбу', 
                translation: 'правительство',
                emoji: '🏛️',
                category: 'government',
                example: '정부가 새로운 정책을 발표했어요',
                exampleTranslation: 'Правительство объявило новую политику',
                politicalContext: 'Центральный орган исполнительной власти'
            },
            {
                korean: '대통령', 
                pronunciation: 'дэтхоннён', 
                translation: 'президент',
                emoji: '👔',
                category: 'government',
                example: '대통령이 국민에게 연설했어요',
                exampleTranslation: 'Президент выступил с речью перед народом',
                politicalContext: 'Глава государства, избирается на 5 лет'
            },
            {
                korean: '국회', 
                pronunciation: 'кукхве', 
                translation: 'парламент',
                emoji: '🏛️',
                category: 'government',
                example: '국회에서 법안을 논의해요',
                exampleTranslation: 'В парламенте обсуждают законопроект',
                politicalContext: 'Законодательная власть, 300 депутатов'
            },
            {
                korean: '장관', 
                pronunciation: 'чангван', 
                translation: 'министр',
                emoji: '💼',
                category: 'government',
                example: '교육부 장관이 회의에 참석했어요',
                exampleTranslation: 'Министр образования участвовал в совещании',
                politicalContext: 'Главы министерств в правительстве'
            },
            {
                korean: '공무원', 
                pronunciation: 'конмувон', 
                translation: 'государственный служащий',
                emoji: '👨‍💼',
                category: 'government',
                example: '공무원 시험에 합격했어요',
                exampleTranslation: 'Сдал экзамен на госслужащего',
                politicalContext: 'Работники государственных органов'
            },
            
            // Демократия
            {
                korean: '선거', 
                pronunciation: 'сонго', 
                translation: 'выборы',
                emoji: '🗳️',
                category: 'democracy',
                example: '대통령 선거가 다음 달에 있어요',
                exampleTranslation: 'Президентские выборы в следующем месяце',
                politicalContext: 'Основа демократического процесса'
            },
            {
                korean: '투표', 
                pronunciation: 'тхупхё', 
                translation: 'голосование',
                emoji: '☑️',
                category: 'democracy',
                example: '투표는 비밀로 해요',
                exampleTranslation: 'Голосование проводится тайно',
                politicalContext: 'Право и обязанность граждан'
            },
            {
                korean: '후보자', 
                pronunciation: 'хубоджа', 
                translation: 'кандидат',
                emoji: '🙋‍♂️',
                category: 'democracy',
                example: '후보자가 연설을 했어요',
                exampleTranslation: 'Кандидат произнёс речь',
                politicalContext: 'Участник избирательного процесса'
            },
            {
                korean: '여론', 
                pronunciation: 'ёрон', 
                translation: 'общественное мнение',
                emoji: '💭',
                category: 'democracy',
                example: '여론조사 결과가 나왔어요',
                exampleTranslation: 'Вышли результаты опроса общественного мнения',
                politicalContext: 'Важный фактор в демократии'
            },
            {
                korean: '정당', 
                pronunciation: 'чондан', 
                translation: 'политическая партия',
                emoji: '🎪',
                category: 'democracy',
                example: '여러 정당이 선거에 참여해요',
                exampleTranslation: 'Несколько партий участвуют в выборах',
                politicalContext: 'Организованные политические группы'
            },
            
            // Право
            {
                korean: '법률', 
                pronunciation: 'пормюль', 
                translation: 'закон',
                emoji: '⚖️',
                category: 'law',
                example: '새로운 법률이 제정됐어요',
                exampleTranslation: 'Принят новый закон',
                politicalContext: 'Основа правового государства'
            },
            {
                korean: '재판', 
                pronunciation: 'джэпхан', 
                translation: 'суд, судебный процесс',
                emoji: '🏛️',
                category: 'law',
                example: '재판이 내일 시작돼요',
                exampleTranslation: 'Суд начинается завтра',
                politicalContext: 'Судебная власть в действии'
            },
            {
                korean: '판사', 
                pronunciation: 'пханса', 
                translation: 'судья',
                emoji: '👨‍⚖️',
                category: 'law',
                example: '판사가 판결을 내렸어요',
                exampleTranslation: 'Судья вынес приговор',
                politicalContext: 'Независимая судебная власть'
            },
            {
                korean: '헌법', 
                pronunciation: 'хонбоп', 
                translation: 'конституция',
                emoji: '📜',
                category: 'law',
                example: '헌법이 국가의 기본법이에요',
                exampleTranslation: 'Конституция - основной закон государства',
                politicalContext: 'Высший закон страны'
            },
            {
                korean: '인권', 
                pronunciation: 'инквон', 
                translation: 'права человека',
                emoji: '✊',
                category: 'law',
                example: '인권을 보호해야 해요',
                exampleTranslation: 'Нужно защищать права человека',
                politicalContext: 'Основа современной демократии'
            },
            
            // Экономика
            {
                korean: '경제', 
                pronunciation: 'кёнджэ', 
                translation: 'экономика',
                emoji: '💰',
                category: 'economy',
                example: '경제가 성장하고 있어요',
                exampleTranslation: 'Экономика растёт',
                politicalContext: 'Основа государственного благосостояния'
            },
            {
                korean: '세금', 
                pronunciation: 'сегым', 
                translation: 'налоги',
                emoji: '💸',
                category: 'economy',
                example: '세금을 내야 해요',
                exampleTranslation: 'Нужно платить налоги',
                politicalContext: 'Источник государственных доходов'
            },
            {
                korean: '예산', 
                pronunciation: 'есан', 
                translation: 'бюджет',
                emoji: '📊',
                category: 'economy',
                example: '국가 예산을 승인했어요',
                exampleTranslation: 'Утвердили государственный бюджет',
                politicalContext: 'Планирование государственных расходов'
            },
            {
                korean: '복지', 
                pronunciation: 'покчи', 
                translation: 'социальное обеспечение',
                emoji: '🏥',
                category: 'economy',
                example: '사회 복지가 중요해요',
                exampleTranslation: 'Социальное обеспечение важно',
                politicalContext: 'Забота государства о гражданах'
            },
            {
                korean: '실업', 
                pronunciation: 'сироп', 
                translation: 'безработица',
                emoji: '📉',
                category: 'economy',
                example: '실업률이 낮아졌어요',
                exampleTranslation: 'Уровень безработицы снизился',
                politicalContext: 'Важный социально-экономический показатель'
            },
            
            // Общество
            {
                korean: '시민', 
                pronunciation: 'симинь', 
                translation: 'гражданин',
                emoji: '👥',
                category: 'social',
                example: '시민의 권리와 의무가 있어요',
                exampleTranslation: 'У граждан есть права и обязанности',
                politicalContext: 'Основа демократического общества'
            },
            {
                korean: '사회', 
                pronunciation: 'сахве', 
                translation: 'общество',
                emoji: '🏘️',
                category: 'social',
                example: '사회가 변화하고 있어요',
                exampleTranslation: 'Общество меняется',
                politicalContext: 'Совокупность всех социальных отношений'
            },
            {
                korean: '문화', 
                pronunciation: 'мунхва', 
                translation: 'культура',
                emoji: '🎭',
                category: 'social',
                example: '한국 문화를 배워요',
                exampleTranslation: 'Изучаю корейскую культуру',
                politicalContext: 'Духовная основа нации'
            },
            {
                korean: '교육', 
                pronunciation: 'кёук', 
                translation: 'образование',
                emoji: '📚',
                category: 'social',
                example: '교육이 미래를 만들어요',
                exampleTranslation: 'Образование создаёт будущее',
                politicalContext: 'Инвестиция в человеческий капитал'
            },
            {
                korean: '평등', 
                pronunciation: 'пхёндын', 
                translation: 'равенство',
                emoji: '⚖️',
                category: 'social',
                example: '성별 평등이 중요해요',
                exampleTranslation: 'Гендерное равенство важно',
                politicalContext: 'Основной принцип справедливого общества'
            },
            {
                korean: '자유', 
                pronunciation: 'чаю', 
                translation: 'свобода',
                emoji: '🕊️',
                category: 'social',
                example: '표현의 자유를 보장해요',
                exampleTranslation: 'Гарантируем свободу выражения',
                politicalContext: 'Фундаментальная ценность демократии'
            }
        ];
        
        let filteredVocabulary = vocabulary;
        let currentCardIndex = 0;
        let isFlipped = false;
        
        function loadVocabulary() {
            const grid = document.getElementById('vocabularyGrid');
            grid.innerHTML = '';
            
            filteredVocabulary.forEach((word, index) => {
                const card = document.createElement('div');
                card.className = `society-card ${word.category}`;
                card.innerHTML = `
                    <div class="society-emoji">${word.emoji}</div>
                    <div class="korean-word">${word.korean}</div>
                    <div class="pronunciation">${word.pronunciation}</div>
                    <div class="translation">${word.translation}</div>
                    <div class="political-context">🏛️ ${word.politicalContext}</div>
                    <div class="example-sentence">
                        <div class="korean-sentence">${word.example}</div>
                        <div>${word.exampleTranslation}</div>
                    </div>
                    <button class="speak-btn" onclick="speak('${word.korean}')">🔊 Слово</button>
                    <button class="speak-btn" onclick="speak('${word.example}')">🔊 Пример</button>
                `;
                grid.appendChild(card);
                
                // Анимация появления
                setTimeout(() => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'all 0.5s ease';
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 50);
                }, index * 100);
            });
        }
        
        function filterSociety(category) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (category === 'all') {
                filteredVocabulary = vocabulary;
            } else {
                filteredVocabulary = vocabulary.filter(word => word.category === category);
            }
            
            loadVocabulary();
        }
        
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }
        
        function showVocabulary() {
            document.getElementById('vocabulary-section').style.display = 'block';
            document.getElementById('flashcard-section').style.display = 'none';
            document.getElementById('filter-section').style.display = 'flex';
            updateActiveButton(0);
        }
        
        function showFlashcards() {
            document.getElementById('vocabulary-section').style.display = 'none';
            document.getElementById('flashcard-section').style.display = 'block';
            document.getElementById('filter-section').style.display = 'none';
            updateActiveButton(1);
            updateFlashcard();
        }
        
        function updateFlashcard() {
            const word = vocabulary[currentCardIndex];
            const flashcard = document.getElementById('flashcard');
            const content = document.getElementById('flashcard-content');
            
            if (isFlipped) {
                content.innerHTML = `
                    <div class="society-emoji">${word.emoji}</div>
                    <div class="pronunciation">${word.pronunciation}</div>
                    <div class="translation">${word.translation}</div>
                    <div class="political-context" style="margin: 15px 0; max-width: 300px;">🏛️ ${word.politicalContext}</div>
                    <div class="example-sentence" style="margin-top: 15px;">
                        <div class="korean-sentence">${word.example}</div>
                        <div style="font-size: 0.9em; color: #666;">${word.exampleTranslation}</div>
                    </div>
                `;
            } else {
                content.innerHTML = `
                    <div class="society-emoji">${word.emoji}</div>
                    <div class="korean-word">${word.korean}</div>
                    <button class="speak-btn" onclick="speak('${word.korean}')">🔊 Слово</button>
                `;
            }
            
            document.getElementById('card-counter').textContent = `${currentCardIndex + 1} / ${vocabulary.length}`;
        }
        
        function flipCard() {
            isFlipped = !isFlipped;
            const flashcard = document.getElementById('flashcard');
            flashcard.style.transform = isFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)';
            setTimeout(() => {
                updateFlashcard();
                flashcard.style.transform = 'rotateY(0deg)';
            }, 150);
        }
        
        function nextCard() {
            currentCardIndex = (currentCardIndex + 1) % vocabulary.length;
            isFlipped = false;
            updateFlashcard();
        }
        
        function prevCard() {
            currentCardIndex = (currentCardIndex - 1 + vocabulary.length) % vocabulary.length;
            isFlipped = false;
            updateFlashcard();
        }
        
        function updateActiveButton(index) {
            const buttons = document.querySelectorAll('.mode-btn');
            buttons.forEach((btn, i) => {
                if (i === index) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }
        
        function showTests() {
            document.getElementById('vocabulary-section').style.display = 'none';
            document.getElementById('flashcard-section').style.display = 'none';
            document.getElementById('test-section').style.display = 'block';
            document.getElementById('filter-section').style.display = 'none';
            updateActiveButton(2);
        }
        
        // Переменные для тестов
        let currentTest = null;
        let currentQuestionIndex = 0;
        let testQuestions = [];
        let correctAnswers = 0;
        let userAnswers = [];
        let isAnswered = false;
        
        function startTest(type) {
            currentTest = type;
            currentQuestionIndex = 0;
            correctAnswers = 0;
            userAnswers = [];
            isAnswered = false;
            
            // Обновляем активную кнопку типа теста
            document.querySelectorAll('.test-type-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Генерируем вопросы
            generateTestQuestions(type);
            
            // Показываем интерфейс теста
            document.getElementById('test-content').style.display = 'block';
            document.getElementById('test-result').style.display = 'none';
            
            // Показываем первый вопрос
            showQuestion();
        }
        
        function generateTestQuestions(type) {
            const shuffled = [...vocabulary].sort(() => 0.5 - Math.random());
            testQuestions = shuffled.slice(0, 10);
            
            testQuestions.forEach((question, index) => {
                if (type === 'multiple') {
                    // Генерируем варианты ответов
                    const wrongAnswers = vocabulary
                        .filter(w => w.korean !== question.korean)
                        .sort(() => 0.5 - Math.random())
                        .slice(0, 3)
                        .map(w => w.translation);
                    
                    question.options = [question.translation, ...wrongAnswers]
                        .sort(() => 0.5 - Math.random());
                    question.correctAnswer = question.translation;
                } else if (type === 'context') {
                    // Для контекстных вопросов
                    const wrongWords = vocabulary
                        .filter(w => w.korean !== question.korean && w.category === question.category)
                        .sort(() => 0.5 - Math.random())
                        .slice(0, 3)
                        .map(w => w.korean);
                    
                    question.options = [question.korean, ...wrongWords]
                        .sort(() => 0.5 - Math.random());
                    question.correctAnswer = question.korean;
                }
            });
        }
        
        function showQuestion() {
            const question = testQuestions[currentQuestionIndex];
            const questionEl = document.getElementById('test-question');
            const answersEl = document.getElementById('test-answers');
            const controlsEl = document.getElementById('test-controls');
            
            // Обновляем прогресс
            document.getElementById('test-progress').textContent = 
                `Вопрос ${currentQuestionIndex + 1} из ${testQuestions.length}`;
            document.getElementById('test-score').textContent = 
                `Правильно: ${correctAnswers} / ${currentQuestionIndex}`;
            
            isAnswered = false;
            controlsEl.style.display = 'none';
            
            if (currentTest === 'multiple') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 15px;">
                        Как переводится: <strong style="color: #2d3436;">${question.korean}</strong> <button class="speak-btn" onclick="speak('${question.korean}')">🔊</button>
                    </div>
                    <div style="font-style: italic; color: #666;">[${question.pronunciation}]</div>
                `;
                
                answersEl.innerHTML = question.options.map((option, index) => 
                    `<div class="answer-option" onclick="selectAnswer('${option}', '${question.correctAnswer}')">${option}</div>`
                ).join('');
                
            } else if (currentTest === 'input') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 15px;">
                        Напишите корейское слово для: <strong style="color: #2d3436;">${question.translation}</strong>
                    </div>
                    <div style="font-style: italic; color: #666;">Произношение: [${question.pronunciation}]</div>
                `;
                
                answersEl.innerHTML = `
                    <input type="text" class="answer-input" id="answer-input" 
                           placeholder="Введите корейское слово..." 
                           onkeypress="if(event.key==='Enter') checkInputAnswer('${question.korean}')">
                    <button class="mode-btn" onclick="checkInputAnswer('${question.korean}')">Проверить</button>
                `;
                
            } else if (currentTest === 'context') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 15px;">
                        Выберите правильное слово для предложения:
                    </div>
                    <div style="font-size: 1.1em; padding: 15px; background: #f8f9fa; border-radius: 8px; margin: 15px 0;">
                        ${question.example.replace(question.korean, '<strong style="color: #e17055;">[ ? ]</strong>')}
                    </div>
                    <div style="font-style: italic; color: #666;">${question.exampleTranslation}</div>
                `;
                
                answersEl.innerHTML = question.options.map((option, index) => 
                    `<div class="answer-option" onclick="selectAnswer('${option}', '${question.correctAnswer}')">
                        ${option} <button class="speak-btn" onclick="speak('${option}')">🔊</button>
                    </div>`
                ).join('');
                
            } else if (currentTest === 'listening') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 20px;">
                        Прослушайте и выберите правильный перевод:
                    </div>
                    <button class="mode-btn" onclick="speak('${question.korean}')" 
                            style="font-size: 1.5em; padding: 20px 40px; margin: 20px;">🔊 Воспроизвести</button>
                `;
                
                // Создаем варианты как для multiple choice
                const wrongAnswers = vocabulary
                    .filter(w => w.korean !== question.korean)
                    .sort(() => 0.5 - Math.random())
                    .slice(0, 3)
                    .map(w => w.translation);
                
                const options = [question.translation, ...wrongAnswers]
                    .sort(() => 0.5 - Math.random());
                
                answersEl.innerHTML = options.map((option, index) => 
                    `<div class="answer-option" onclick="selectAnswer('${option}', '${question.translation}')">${option}</div>`
                ).join('');
            }
        }
        
        function selectAnswer(selected, correct) {
            if (isAnswered) return;
            
            isAnswered = true;
            const isCorrect = selected === correct;
            
            if (isCorrect) {
                correctAnswers++;
            }
            
            userAnswers.push({
                question: testQuestions[currentQuestionIndex],
                selected: selected,
                correct: correct,
                isCorrect: isCorrect
            });
            
            // Подсвечиваем ответы
            document.querySelectorAll('.answer-option').forEach(option => {
                if (option.textContent.trim().startsWith(correct)) {
                    option.classList.add('correct');
                } else if (option.textContent.trim().startsWith(selected) && !isCorrect) {
                    option.classList.add('incorrect');
                }
                option.style.pointerEvents = 'none';
            });
            
            // Показываем обратную связь
            const feedback = document.createElement('div');
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.innerHTML = isCorrect ? 
                '✅ Правильно!' : 
                `❌ Неправильно. Правильный ответ: ${correct}`;
            
            document.getElementById('test-answers').appendChild(feedback);
            
            // Показываем кнопку продолжения
            document.getElementById('test-controls').style.display = 'block';
            
            // Обновляем счетчик
            document.getElementById('test-score').textContent = 
                `Правильно: ${correctAnswers} / ${currentQuestionIndex + 1}`;
        }
        
        function checkInputAnswer(correct) {
            if (isAnswered) return;
            
            const input = document.getElementById('answer-input');
            const userAnswer = input.value.trim();
            const isCorrect = userAnswer === correct;
            
            isAnswered = true;
            
            if (isCorrect) {
                correctAnswers++;
            }
            
            userAnswers.push({
                question: testQuestions[currentQuestionIndex],
                selected: userAnswer,
                correct: correct,
                isCorrect: isCorrect
            });
            
            // Показываем обратную связь
            const feedback = document.createElement('div');
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.innerHTML = isCorrect ? 
                '✅ Правильно!' : 
                `❌ Неправильно. Правильный ответ: ${correct}`;
            
            document.getElementById('test-answers').appendChild(feedback);
            
            input.disabled = true;
            
            // Показываем кнопку продолжения
            document.getElementById('test-controls').style.display = 'block';
            
            // Обновляем счетчик
            document.getElementById('test-score').textContent = 
                `Правильно: ${correctAnswers} / ${currentQuestionIndex + 1}`;
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < testQuestions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }
        
        function showResult() {
            const percentage = Math.round((correctAnswers / testQuestions.length) * 100);
            
            document.getElementById('test-content').style.display = 'none';
            document.getElementById('test-result').style.display = 'block';
            
            document.getElementById('final-score').textContent = 
                `${correctAnswers} из ${testQuestions.length}`;
            document.getElementById('final-percentage').textContent = `${percentage}%`;
            
            // Меняем цвет в зависимости от результата
            const scoreEl = document.getElementById('final-score');
            const percentageEl = document.getElementById('final-percentage');
            
            if (percentage >= 80) {
                scoreEl.style.color = '#00b894';
                percentageEl.style.color = '#00b894';
            } else if (percentage >= 60) {
                scoreEl.style.color = '#fdcb6e';
                percentageEl.style.color = '#fdcb6e';
            } else {
                scoreEl.style.color = '#e17055';
                percentageEl.style.color = '#e17055';
            }
        }
        
        function restartTest() {
            if (currentTest) {
                startTest(currentTest);
            }
        }
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            loadVocabulary();
            updateFlashcard();
        });
        
        // Горячие клавиши
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('flashcard-section').style.display !== 'none') {
                if (e.code === 'Space') {
                    e.preventDefault();
                    flipCard();
                } else if (e.code === 'ArrowRight') {
                    nextCard();
                } else if (e.code === 'ArrowLeft') {
                    prevCard();
                }
            }
        });
    </script>
</body>
</html>