<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—Ä–æ–∫ 21: –ó–¥–æ—Ä–æ–≤—å–µ –∏ –º–µ–¥–∏—Ü–∏–Ω–∞ (Í±¥Í∞ïÍ≥º ÏùòÌïô)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e17055, #81ecec, #74b9ff, #a29bfe);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .nav {
            background: rgba(255,255,255,0.95);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .nav a {
            background: #e17055;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 10px;
            margin: 0 10px;
            display: inline-block;
            transition: all 0.3s;
        }
        
        .nav a:hover {
            background: #d63031;
            transform: translateY(-2px);
        }
        
        .lesson-header {
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .lesson-header h1 {
            font-size: 2.5em;
            color: #e17055;
            margin-bottom: 10px;
        }
        
        .health-pulse {
            position: relative;
            width: 300px;
            height: 100px;
            margin: 20px auto;
            overflow: hidden;
            border-radius: 15px;
            background: linear-gradient(to bottom, #f8f9fa, #e8f4fd);
        }
        
        .pulse-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: #e17055;
            top: 50%;
            animation: heartbeat 2s ease-in-out infinite;
        }
        
        .health-icons {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .health-icon {
            position: absolute;
            font-size: 2em;
            animation: float-health 4s ease-in-out infinite;
        }
        
        .health1 {
            top: 20px;
            left: 10%;
            animation-delay: 0s;
        }
        
        .health2 {
            top: 60px;
            left: 30%;
            animation-delay: -1s;
        }
        
        .health3 {
            top: 10px;
            left: 50%;
            animation-delay: -2s;
        }
        
        .health4 {
            top: 70px;
            left: 70%;
            animation-delay: -3s;
        }
        
        .health5 {
            top: 30px;
            left: 90%;
            animation-delay: -4s;
        }
        
        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .health-card {
            background: rgba(255,255,255,0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .health-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--card-color, #e17055);
        }
        
        .health-card.body::before { background: linear-gradient(90deg, #e17055, #d63031); }
        .health-card.symptoms::before { background: linear-gradient(90deg, #74b9ff, #0984e3); }
        .health-card.treatment::before { background: linear-gradient(90deg, #00b894, #00cec9); }
        .health-card.medicine::before { background: linear-gradient(90deg, #a29bfe, #6c5ce7); }
        .health-card.wellness::before { background: linear-gradient(90deg, #fdcb6e, #e17055); }
        
        .health-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .health-emoji {
            font-size: 3em;
            text-align: center;
            margin-bottom: 10px;
            animation: health-beat 3s ease-in-out infinite;
        }
        
        .korean-word {
            font-size: 1.8em;
            font-weight: bold;
            color: #e17055;
            margin-bottom: 5px;
            text-align: center;
        }
        
        .pronunciation {
            font-size: 1.1em;
            color: #74b9ff;
            margin-bottom: 10px;
            font-style: italic;
            text-align: center;
        }
        
        .translation {
            font-size: 1em;
            color: #666;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .medical-note {
            background: #f0f8ff;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.85em;
            color: #74b9ff;
            margin: 8px 0;
            border-left: 3px solid #e17055;
        }
        
        .example-sentence {
            background: #fff5f5;
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid #e17055;
            font-size: 0.9em;
        }
        
        .korean-sentence {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .speak-btn {
            background: #e17055;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
            font-size: 0.9em;
            color: white;
        }
        
        .speak-btn:hover {
            background: #d63031;
        }
        
        .study-mode {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            background: #e17055;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mode-btn.active {
            background: #74b9ff;
        }
        
        .filter-section {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            background: rgba(255,255,255,0.9);
            border: 2px solid #ddd;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-btn.active {
            background: #e17055;
            color: white;
            border-color: #e17055;
        }
        
        .health-tips {
            background: rgba(255,255,255,0.95);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .health-tip {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px;
            border-radius: 10px;
            border-left: 4px solid #e17055;
            display: inline-block;
            min-width: 250px;
            text-align: left;
        }
        
        .flashcard {
            background: rgba(255,255,255,0.95);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 20px;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .flashcard:hover {
            transform: rotateY(3deg) scale(1.02);
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .flashcard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #e17055, #d63031);
            border-radius: 20px 20px 0 0;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scaleX(1); }
            50% { transform: scaleX(1.1); }
        }
        
        @keyframes float-health {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes health-beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ */
        .test-container {
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .test-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .test-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .test-type-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            color: #495057;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .test-type-btn.active,
        .test-type-btn:hover {
            background: #e17055;
            color: white;
            border-color: #e17055;
            transform: translateY(-2px);
        }
        
        .test-content {
            min-height: 300px;
        }
        
        .test-question {
            font-size: 1.4em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
            color: #e17055;
            padding: 20px;
            background: #fff5f5;
            border-radius: 10px;
            border-left: 4px solid #e17055;
        }
        
        .test-answers {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .answer-option {
            background: white;
            border: 2px solid #dee2e6;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            text-align: center;
        }
        
        .answer-option:hover {
            border-color: #e17055;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .answer-option.selected {
            background: #e17055;
            color: white;
            border-color: #e17055;
        }
        
        .answer-option.correct {
            background: #00b894;
            color: white;
            border-color: #00b894;
        }
        
        .answer-option.incorrect {
            background: #d63031;
            color: white;
            border-color: #d63031;
        }
        
        .answer-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .answer-input:focus {
            outline: none;
            border-color: #e17055;
        }
        
        .test-controls {
            text-align: center;
            margin-top: 20px;
        }
        
        .test-result {
            text-align: center;
            background: rgba(255,255,255,0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .result-stats {
            margin: 30px 0;
        }
        
        .result-score {
            font-size: 2em;
            font-weight: bold;
            color: #e17055;
            margin-bottom: 10px;
        }
        
        .result-percentage {
            font-size: 1.5em;
            color: #74b9ff;
        }
        
        .result-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
            text-align: center;
        }
        
        .feedback.correct {
            background: #d1f2eb;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <a href="../index.html">‚Üê –ö 4Í∏â</a>
            <a href="../../index.html">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        </div>
        
        <div class="lesson-header">
            <h1>üè• –£—Ä–æ–∫ 21: –ó–¥–æ—Ä–æ–≤—å–µ –∏ –º–µ–¥–∏—Ü–∏–Ω–∞ (Í±¥Í∞ïÍ≥º ÏùòÌïô)</h1>
            <p>–ò–∑—É—á–∞–µ–º –º–µ–¥–∏—Ü–∏–Ω—Å–∫—É—é —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—é –∏ –∑–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</p>
            
            <div class="health-pulse">
                <div class="pulse-line"></div>
                <div class="health-icons">
                    <div class="health-icon health1">‚ù§Ô∏è</div>
                    <div class="health-icon health2">ü©∫</div>
                    <div class="health-icon health3">üíä</div>
                    <div class="health-icon health4">üè•</div>
                    <div class="health-icon health5">‚öïÔ∏è</div>
                </div>
            </div>
        </div>
        
        <div class="health-tips">
            <h3>üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è</h3>
            <div class="health-tip">
                <strong>Í∑úÏπôÏ†ÅÏù∏ Ïö¥Îèô (Regular exercise)</strong><br>
                –†–µ–≥—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —É–∫—Ä–µ–ø–ª—è—é—Ç –∑–¥–æ—Ä–æ–≤—å–µ
            </div>
            <div class="health-tip">
                <strong>Í∑†Ìòï Ïû°Ìûå ÏãùÏÇ¨ (Balanced diet)</strong><br>
                –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ - –æ—Å–Ω–æ–≤–∞ –∑–¥–æ—Ä–æ–≤—å—è
            </div>
            <div class="health-tip">
                <strong>Ï∂©Î∂ÑÌïú ÏàòÎ©¥ (Adequate sleep)</strong><br>
                –î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Å–æ–Ω –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–º
            </div>
        </div>
        
        <div class="study-mode">
            <button class="mode-btn active" onclick="showVocabulary()">üìö –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å</button>
            <button class="mode-btn" onclick="showFlashcards()">üÉè –ö–∞—Ä—Ç–æ—á–∫–∏</button>
            <button class="mode-btn" onclick="showTests()">üß© –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ—Å—Ç—ã</button>
        </div>
        
        <div class="filter-section" id="filter-section">
            <button class="filter-btn active" onclick="filterHealth('all')">–í—Å–µ</button>
            <button class="filter-btn" onclick="filterHealth('body')">üë§ –¢–µ–ª–æ</button>
            <button class="filter-btn" onclick="filterHealth('symptoms')">ü§í –°–∏–º–ø—Ç–æ–º—ã</button>
            <button class="filter-btn" onclick="filterHealth('treatment')">üè• –õ–µ—á–µ–Ω–∏–µ</button>
            <button class="filter-btn" onclick="filterHealth('medicine')">üíä –õ–µ–∫–∞—Ä—Å—Ç–≤–∞</button>
            <button class="filter-btn" onclick="filterHealth('wellness')">üí™ –ó–¥–æ—Ä–æ–≤—å–µ</button>
        </div>
        
        <div id="vocabulary-section">
            <div class="vocabulary-grid" id="vocabularyGrid">
                <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JS -->
            </div>
        </div>
        
        <div id="flashcard-section" style="display: none;">
            <div class="flashcard" id="flashcard" onclick="flipCard()">
                <div id="flashcard-content">
                    <div class="health-emoji" id="flashcard-emoji">üè•</div>
                    <div class="korean-word" id="flashcard-korean">Î≥ëÏõê</div>
                    <button class="speak-btn" onclick="speak(document.getElementById('flashcard-korean').textContent)">üîä</button>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="mode-btn" onclick="prevCard()">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</button>
                <span id="card-counter">1 / 25</span>
                <button class="mode-btn" onclick="nextCard()">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</button>
            </div>
            <div style="text-align: center; margin-top: 10px; color: #666;">
                <small>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –¥–ª—è –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ü—Ä–æ–±–µ–ª</small>
            </div>
        </div>
        
        <div id="test-section" style="display: none;">
            <div class="test-container">
                <div class="test-header">
                    <h3>üß© –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ—Å—Ç—ã</h3>
                    <div class="test-stats">
                        <span id="test-score">–ü—Ä–∞–≤–∏–ª—å–Ω–æ: 0 / 0</span>
                        <span id="test-progress">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 10</span>
                    </div>
                </div>
                
                <div class="test-selector">
                    <button class="test-type-btn active" onclick="startTest('multiple')">üìã –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ—Ä–º–∏–Ω–æ–≤</button>
                    <button class="test-type-btn" onclick="startTest('input')">‚úèÔ∏è –í–≤–æ–¥ —Å–ª–æ–≤–∞</button>
                    <button class="test-type-btn" onclick="startTest('context')">üìù –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Å–∏—Ç—É–∞—Ü–∏–∏</button>
                    <button class="test-type-btn" onclick="startTest('listening')">üëÇ –ü—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ</button>
                </div>
                
                <div id="test-content" class="test-content">
                    <div class="test-question" id="test-question">
                        –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ç–µ—Å—Ç–∞ –≤—ã—à–µ
                    </div>
                    <div class="test-answers" id="test-answers">
                        <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JS -->
                    </div>
                    <div class="test-controls" id="test-controls" style="display: none;">
                        <button class="mode-btn" onclick="nextQuestion()">–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å ‚Üí</button>
                        <button class="mode-btn" onclick="showResult()">–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
                    </div>
                </div>
                
                <div id="test-result" class="test-result" style="display: none;">
                    <h3>üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞</h3>
                    <div class="result-stats">
                        <div class="result-score" id="final-score"></div>
                        <div class="result-percentage" id="final-percentage"></div>
                    </div>
                    <div class="result-actions">
                        <button class="mode-btn" onclick="restartTest()">üîÑ –ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑</button>
                        <button class="mode-btn" onclick="showVocabulary()">üìö –ö —Å–ª–æ–≤–∞—Ä—é</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const vocabulary = [
            // –¢–µ–ª–æ
            {
                korean: 'Î™∏', 
                pronunciation: '–º–æ–º', 
                translation: '—Ç–µ–ª–æ',
                emoji: 'üë§',
                category: 'body',
                example: 'Î™∏Ïù¥ ÏïÑÌîÑÎ©¥ Î≥ëÏõêÏóê Í∞ÄÏÑ∏Ïöî',
                exampleTranslation: '–ï—Å–ª–∏ –±–æ–ª–∏—Ç —Ç–µ–ª–æ, –∏–¥–∏—Ç–µ –≤ –±–æ–ª—å–Ω–∏—Ü—É',
                medicalNote: '–û–±—â–µ–µ –ø–æ–Ω—è—Ç–∏–µ –¥–ª—è –≤—Å–µ–≥–æ –æ—Ä–≥–∞–Ω–∏–∑–º–∞'
            },
            {
                korean: 'Î®∏Î¶¨', 
                pronunciation: '–º–æ—Ä–∏', 
                translation: '–≥–æ–ª–æ–≤–∞',
                emoji: 'üß†',
                category: 'body',
                example: 'Î®∏Î¶¨Í∞Ä ÏïÑÌååÏöî',
                exampleTranslation: '–£ –º–µ–Ω—è –±–æ–ª–∏—Ç –≥–æ–ª–æ–≤–∞',
                medicalNote: '–ß–∞—Å—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º –∏–ª–∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å—é'
            },
            {
                korean: 'Ïã¨Ïû•', 
                pronunciation: '—Å–∏–º–¥–∂–∞–Ω', 
                translation: '—Å–µ—Ä–¥—Ü–µ',
                emoji: '‚ù§Ô∏è',
                category: 'body',
                example: 'Ïã¨Ïû•Ïù¥ Îπ®Î¶¨ Îõ∞Ïñ¥Ïöî',
                exampleTranslation: '–°–µ—Ä–¥—Ü–µ –±—ã—Å—Ç—Ä–æ –±—å—ë—Ç—Å—è',
                medicalNote: '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ—Ä–≥–∞–Ω –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è'
            },
            {
                korean: 'Ìèê', 
                pronunciation: '–ø—Ö–µ', 
                translation: '–ª—ë–≥–∫–∏–µ',
                emoji: 'ü´Å',
                category: 'body',
                example: 'Ìèê Í±¥Í∞ïÏù¥ Ï§ëÏöîÌï¥Ïöî',
                exampleTranslation: '–ó–¥–æ—Ä–æ–≤—å–µ –ª—ë–≥–∫–∏—Ö –≤–∞–∂–Ω–æ',
                medicalNote: '–û—Ä–≥–∞–Ω –¥—ã—Ö–∞—Ç–µ–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã'
            },
            {
                korean: 'ÏúÑ', 
                pronunciation: '–≤–∏', 
                translation: '–∂–µ–ª—É–¥–æ–∫',
                emoji: 'ü´É',
                category: 'body',
                example: 'ÏúÑÍ∞Ä ÏïÑÌîÑÎ©¥ ÏïΩÏùÑ ÎìúÏÑ∏Ïöî',
                exampleTranslation: '–ï—Å–ª–∏ –±–æ–ª–∏—Ç –∂–µ–ª—É–¥–æ–∫, –ø—Ä–∏–º–∏—Ç–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ',
                medicalNote: '–û—Å–Ω–æ–≤–Ω–æ–π –æ—Ä–≥–∞–Ω –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏—è'
            },
            
            // –°–∏–º–ø—Ç–æ–º—ã
            {
                korean: 'ÏïÑÌîÑÎã§', 
                pronunciation: '–∞–ø—Ö—ã–¥–∞', 
                translation: '–±–æ–ª–µ—Ç—å',
                emoji: 'üò£',
                category: 'symptoms',
                example: 'Î∞∞Í∞Ä ÏïÑÌååÏöî',
                exampleTranslation: '–£ –º–µ–Ω—è –±–æ–ª–∏—Ç –∂–∏–≤–æ—Ç',
                medicalNote: '–û–±—â–∏–π —Å–∏–º–ø—Ç–æ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π'
            },
            {
                korean: 'Ïó¥', 
                pronunciation: '—ë–ª—å', 
                translation: '–ª–∏—Ö–æ—Ä–∞–¥–∫–∞, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞',
                emoji: 'ü§í',
                category: 'symptoms',
                example: 'Ïó¥Ïù¥ ÎÇòÏöî',
                exampleTranslation: '–£ –º–µ–Ω—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞',
                medicalNote: '–ó–∞—â–∏—Ç–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –æ—Ä–≥–∞–Ω–∏–∑–º–∞ –Ω–∞ –∏–Ω—Ñ–µ–∫—Ü–∏—é'
            },
            {
                korean: 'Í∏∞Ïπ®', 
                pronunciation: '–∫–∏—á—Ö–∏–º', 
                translation: '–∫–∞—à–µ–ª—å',
                emoji: 'üò∑',
                category: 'symptoms',
                example: 'Í∏∞Ïπ®Ïù¥ Ïã¨Ìï¥Ïöî',
                exampleTranslation: '–£ –º–µ–Ω—è —Å–∏–ª—å–Ω—ã–π –∫–∞—à–µ–ª—å',
                medicalNote: '–ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–∏–º–ø—Ç–æ–º–æ–º –ø—Ä–æ—Å—Ç—É–¥—ã –∏–ª–∏ –∞–ª–ª–µ—Ä–≥–∏–∏'
            },
            {
                korean: 'ÎëêÌÜµ', 
                pronunciation: '–¥—É—Ç—Ö–æ–Ω', 
                translation: '–≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å',
                emoji: 'ü§ï',
                category: 'symptoms',
                example: 'ÎëêÌÜµÏù¥ ÏûàÏñ¥Ïöî',
                exampleTranslation: '–£ –º–µ–Ω—è –≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å',
                medicalNote: '–ß–∞—Å—Ç–æ —Å–≤—è–∑–∞–Ω–∞ —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º –∏–ª–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º'
            },
            {
                korean: 'ÌîºÍ≥§ÌïòÎã§', 
                pronunciation: '–ø—Ö–∏–≥–æ–Ω–∞–¥–∞', 
                translation: '—É—Å—Ç–∞–≤–∞—Ç—å',
                emoji: 'üò¥',
                category: 'symptoms',
                example: 'ÏöîÏ¶ò ÎÑàÎ¨¥ ÌîºÍ≥§Ìï¥Ïöî',
                exampleTranslation: '–í –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—á–µ–Ω—å —É—Å—Ç–∞—é',
                medicalNote: '–ú–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø–µ—Ä–µ—É—Ç–æ–º–ª–µ–Ω–∏–µ –∏–ª–∏ –±–æ–ª–µ–∑–Ω—å'
            },
            
            // –õ–µ—á–µ–Ω–∏–µ
            {
                korean: 'Î≥ëÏõê', 
                pronunciation: '–ø—ë–Ω–≤–æ–Ω', 
                translation: '–±–æ–ª—å–Ω–∏—Ü–∞',
                emoji: 'üè•',
                category: 'treatment',
                example: 'Î≥ëÏõêÏóêÏÑú Í≤ÄÏÇ¨Î•º Î∞õÏïòÏñ¥Ïöî',
                exampleTranslation: '–ü—Ä–æ—à—ë–ª –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤ –±–æ–ª—å–Ω–∏—Ü–µ',
                medicalNote: '–ú–µ—Å—Ç–æ –æ–∫–∞–∑–∞–Ω–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –ø–æ–º–æ—â–∏'
            },
            {
                korean: 'ÏùòÏÇ¨', 
                pronunciation: '—ã–π—Å–∞', 
                translation: '–≤—Ä–∞—á',
                emoji: 'üë®‚Äç‚öïÔ∏è',
                category: 'treatment',
                example: 'ÏùòÏÇ¨ÏÑ†ÏÉùÎãòÍªò ÏßÑÎ£åÎ•º Î∞õÏïÑÏöî',
                exampleTranslation: '–ü–æ–ª—É—á–∞—é –ª–µ—á–µ–Ω–∏–µ —É –≤—Ä–∞—á–∞',
                medicalNote: '–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∏ –ª–µ—á–µ–Ω–∏—é'
            },
            {
                korean: 'Í∞ÑÌò∏ÏÇ¨', 
                pronunciation: '–∫–∞–Ω—Ö–æ—Å–∞', 
                translation: '–º–µ–¥—Å–µ—Å—Ç—Ä–∞',
                emoji: 'üë©‚Äç‚öïÔ∏è',
                category: 'treatment',
                example: 'Í∞ÑÌò∏ÏÇ¨Í∞Ä Ï£ºÏÇ¨Î•º ÎÜìÏïÑÏöî',
                exampleTranslation: '–ú–µ–¥—Å–µ—Å—Ç—Ä–∞ –¥–µ–ª–∞–µ—Ç —É–∫–æ–ª',
                medicalNote: '–ü–æ–º–æ—â–Ω–∏–∫ –≤—Ä–∞—á–∞ –≤ –ª–µ—á–µ–Ω–∏–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤'
            },
            {
                korean: 'ÏàòÏà†', 
                pronunciation: '—Å—É—Å—É–ª—å', 
                translation: '–æ–ø–µ—Ä–∞—Ü–∏—è',
                emoji: 'üî¨',
                category: 'treatment',
                example: 'ÎÇ¥Ïùº ÏàòÏà†ÏùÑ Î∞õÏïÑÏöî',
                exampleTranslation: '–ó–∞–≤—Ç—Ä–∞ –¥–µ–ª–∞—é—Ç –æ–ø–µ—Ä–∞—Ü–∏—é',
                medicalNote: '–•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ –¥–ª—è –ª–µ—á–µ–Ω–∏—è'
            },
            {
                korean: 'ÏπòÎ£å', 
                pronunciation: '—á—Ö–∏—Ä—ë', 
                translation: '–ª–µ—á–µ–Ω–∏–µ',
                emoji: 'üíâ',
                category: 'treatment',
                example: 'ÏπòÎ£åÎ•º Î∞õÍ≥† ÏûàÏñ¥Ïöî',
                exampleTranslation: '–ü—Ä–æ—Ö–æ–∂—É –ª–µ—á–µ–Ω–∏–µ',
                medicalNote: '–ü—Ä–æ—Ü–µ—Å—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è'
            },
            
            // –õ–µ–∫–∞—Ä—Å—Ç–≤–∞
            {
                korean: 'ÏïΩ', 
                pronunciation: '—è–∫', 
                translation: '–ª–µ–∫–∞—Ä—Å—Ç–≤–æ',
                emoji: 'üíä',
                category: 'medicine',
                example: 'ÏïΩÏùÑ Î®πÏóàÏñ¥Ïöî',
                exampleTranslation: '–ü—Ä–∏–Ω—è–ª –ª–µ–∫–∞—Ä—Å—Ç–≤–æ',
                medicalNote: '–°—Ä–µ–¥—Å—Ç–≤–æ –¥–ª—è –ª–µ—á–µ–Ω–∏—è –±–æ–ª–µ–∑–Ω–µ–π'
            },
            {
                korean: 'ÏßÑÌÜµÏ†ú', 
                pronunciation: '—á–∏–Ω—Ç—Ö–æ–Ω–¥–∂—ç', 
                translation: '–æ–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ',
                emoji: 'üíâ',
                category: 'medicine',
                example: 'ÏßÑÌÜµÏ†úÎ•º Î®πÏúºÎ©¥ ÏïÑÌîîÏù¥ Ï§ÑÏñ¥Ïöî',
                exampleTranslation: '–ï—Å–ª–∏ –ø—Ä–∏–Ω—è—Ç—å –æ–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ, –±–æ–ª—å —É–º–µ–Ω—å—à–∏—Ç—Å—è',
                medicalNote: '–õ–µ–∫–∞—Ä—Å—Ç–≤–æ –¥–ª—è —Å–Ω—è—Ç–∏—è –±–æ–ª–∏'
            },
            {
                korean: 'Ìï≠ÏÉùÏ†ú', 
                pronunciation: '—Ö–∞–Ω—Å—ç–Ω–¥–∂—ç', 
                translation: '–∞–Ω—Ç–∏–±–∏–æ—Ç–∏–∫',
                emoji: 'üíä',
                category: 'medicine',
                example: 'Ìï≠ÏÉùÏ†úÎäî ÏùòÏÇ¨ Ï≤òÎ∞©Ïù¥ ÌïÑÏöîÌï¥Ïöî',
                exampleTranslation: '–î–ª—è –∞–Ω—Ç–∏–±–∏–æ—Ç–∏–∫–æ–≤ –Ω—É–∂–µ–Ω —Ä–µ—Ü–µ–ø—Ç –≤—Ä–∞—á–∞',
                medicalNote: '–ü—Ä–µ–ø–∞—Ä–∞—Ç –ø—Ä–æ—Ç–∏–≤ –±–∞–∫—Ç–µ—Ä–∏–∞–ª—å–Ω—ã—Ö –∏–Ω—Ñ–µ–∫—Ü–∏–π'
            },
            {
                korean: 'ÎπÑÌÉÄÎØº', 
                pronunciation: '–±–∏—Ç—Ö–∞–º–∏–Ω', 
                translation: '–≤–∏—Ç–∞–º–∏–Ω—ã',
                emoji: 'üçä',
                category: 'medicine',
                example: 'ÎπÑÌÉÄÎØºÏùÑ Îß§Ïùº Î®πÏñ¥Ïöî',
                exampleTranslation: '–ü—Ä–∏–Ω–∏–º–∞—é –≤–∏—Ç–∞–º–∏–Ω—ã –∫–∞–∂–¥—ã–π –¥–µ–Ω—å',
                medicalNote: '–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–º–∞ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞'
            },
            {
                korean: 'Ïó∞Í≥†', 
                pronunciation: '—ë–Ω–≥–æ', 
                translation: '–º–∞–∑—å',
                emoji: 'üß¥',
                category: 'medicine',
                example: 'ÏÉÅÏ≤òÏóê Ïó∞Í≥†Î•º Î∞úÎùºÏöî',
                exampleTranslation: '–ù–∞–Ω–æ—à—É –º–∞–∑—å –Ω–∞ —Ä–∞–Ω—É',
                medicalNote: '–ù–∞—Ä—É–∂–Ω–æ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ'
            },
            
            // –ó–¥–æ—Ä–æ–≤—å–µ
            {
                korean: 'Í±¥Í∞ï', 
                pronunciation: '–∫–æ–Ω–≥–∞–Ω', 
                translation: '–∑–¥–æ—Ä–æ–≤—å–µ',
                emoji: 'üí™',
                category: 'wellness',
                example: 'Í±¥Í∞ïÏù¥ ÏµúÍ≥†Ïùò Ïû¨ÏÇ∞Ïù¥ÏóêÏöî',
                exampleTranslation: '–ó–¥–æ—Ä–æ–≤—å–µ - —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ –±–æ–≥–∞—Ç—Å—Ç–≤–æ',
                medicalNote: '–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –±–ª–∞–≥–æ–ø–æ–ª—É—á–∏—è –æ—Ä–≥–∞–Ω–∏–∑–º–∞'
            },
            {
                korean: 'Ïö¥Îèô', 
                pronunciation: '—É–Ω–¥–æ–Ω', 
                translation: '—Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è',
                emoji: 'üèÉ‚Äç‚ôÇÔ∏è',
                category: 'wellness',
                example: 'Îß§Ïùº Ïö¥ÎèôÏùÑ Ìï¥Ïöî',
                exampleTranslation: '–ó–∞–Ω–∏–º–∞—é—Å—å —Å–ø–æ—Ä—Ç–æ–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å',
                medicalNote: '–í–∞–∂–Ω–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π —Ñ–æ—Ä–º—ã'
            },
            {
                korean: 'Îã§Ïù¥Ïñ¥Ìä∏', 
                pronunciation: '–¥–∞–∏–æ—Ç—Ö—ã', 
                translation: '–¥–∏–µ—Ç–∞',
                emoji: 'ü•ó',
                category: 'wellness',
                example: 'Îã§Ïù¥Ïñ¥Ìä∏Î•º ÌïòÍ≥† ÏûàÏñ¥Ïöî',
                exampleTranslation: '–°–∏–∂—É –Ω–∞ –¥–∏–µ—Ç–µ',
                medicalNote: '–†–µ–∂–∏–º –ø–∏—Ç–∞–Ω–∏—è –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è –∏–ª–∏ –ø–æ—Ö—É–¥–µ–Ω–∏—è'
            },
            {
                korean: 'Í∏àÏó∞', 
                pronunciation: '–∫—ã–º—ë–Ω', 
                translation: '–æ—Ç–∫–∞–∑ –æ—Ç –∫—É—Ä–µ–Ω–∏—è',
                emoji: 'üö≠',
                category: 'wellness',
                example: 'Í∏àÏó∞ÏùÑ ÏãúÏûëÌñàÏñ¥Ïöî',
                exampleTranslation: '–ù–∞—á–∞–ª –±—Ä–æ—Å–∞—Ç—å –∫—É—Ä–∏—Ç—å',
                medicalNote: '–í–∞–∂–Ω–æ –¥–ª—è –∑–¥–æ—Ä–æ–≤—å—è –ª—ë–≥–∫–∏—Ö –∏ —Å–µ—Ä–¥—Ü–∞'
            },
            {
                korean: 'Ïä§Ìä∏Î†àÏä§', 
                pronunciation: '—Å—ã—Ç—Ö—ã—Ä—ç—Å—ã', 
                translation: '—Å—Ç—Ä–µ—Å—Å',
                emoji: 'üò∞',
                category: 'wellness',
                example: 'Ïä§Ìä∏Î†àÏä§Î•º Î∞õÏßÄ ÎßàÏÑ∏Ïöî',
                exampleTranslation: '–ù–µ —Å—Ç—Ä–µ—Å—Å—É–π—Ç–µ',
                medicalNote: '–ú–æ–∂–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ –≤–ª–∏—è—Ç—å –Ω–∞ –∑–¥–æ—Ä–æ–≤—å–µ'
            },
            {
                korean: 'Î™ÖÏÉÅ', 
                pronunciation: '–º—ë–Ω—Å–∞–Ω', 
                translation: '–º–µ–¥–∏—Ç–∞—Ü–∏—è',
                emoji: 'üßò‚Äç‚ôÄÔ∏è',
                category: 'wellness',
                example: 'Î™ÖÏÉÅÏùÑ ÌïòÎ©¥ ÎßàÏùåÏù¥ Ìé∏Ìï¥Ï†∏Ïöî',
                exampleTranslation: '–ú–µ–¥–∏—Ç–∞—Ü–∏—è —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç –¥—É—à—É',
                medicalNote: '–ü–æ–º–æ–≥–∞–µ—Ç —Å–Ω–∏–∑–∏—Ç—å —Å—Ç—Ä–µ—Å—Å –∏ —É–ª—É—á—à–∏—Ç—å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é'
            }
        ];
        
        let filteredVocabulary = vocabulary;
        let currentCardIndex = 0;
        let isFlipped = false;
        
        function loadVocabulary() {
            const grid = document.getElementById('vocabularyGrid');
            grid.innerHTML = '';
            
            filteredVocabulary.forEach((word, index) => {
                const card = document.createElement('div');
                card.className = `health-card ${word.category}`;
                card.innerHTML = `
                    <div class="health-emoji">${word.emoji}</div>
                    <div class="korean-word">${word.korean}</div>
                    <div class="pronunciation">${word.pronunciation}</div>
                    <div class="translation">${word.translation}</div>
                    <div class="medical-note">‚öïÔ∏è ${word.medicalNote}</div>
                    <div class="example-sentence">
                        <div class="korean-sentence">${word.example}</div>
                        <div>${word.exampleTranslation}</div>
                    </div>
                    <button class="speak-btn" onclick="speak('${word.korean}')">üîä –°–ª–æ–≤–æ</button>
                    <button class="speak-btn" onclick="speak('${word.example}')">üîä –ü—Ä–∏–º–µ—Ä</button>
                `;
                grid.appendChild(card);
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
                setTimeout(() => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'all 0.5s ease';
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 50);
                }, index * 100);
            });
        }
        
        function filterHealth(category) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (category === 'all') {
                filteredVocabulary = vocabulary;
            } else {
                filteredVocabulary = vocabulary.filter(word => word.category === category);
            }
            
            loadVocabulary();
        }
        
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }
        
        function showVocabulary() {
            document.getElementById('vocabulary-section').style.display = 'block';
            document.getElementById('flashcard-section').style.display = 'none';
            document.getElementById('filter-section').style.display = 'flex';
            updateActiveButton(0);
        }
        
        function showFlashcards() {
            document.getElementById('vocabulary-section').style.display = 'none';
            document.getElementById('flashcard-section').style.display = 'block';
            document.getElementById('filter-section').style.display = 'none';
            updateActiveButton(1);
            updateFlashcard();
        }
        
        function updateFlashcard() {
            const word = vocabulary[currentCardIndex];
            const flashcard = document.getElementById('flashcard');
            const content = document.getElementById('flashcard-content');
            
            if (isFlipped) {
                content.innerHTML = `
                    <div class="health-emoji">${word.emoji}</div>
                    <div class="pronunciation">${word.pronunciation}</div>
                    <div class="translation">${word.translation}</div>
                    <div class="medical-note" style="margin: 15px 0; max-width: 300px;">‚öïÔ∏è ${word.medicalNote}</div>
                    <div class="example-sentence" style="margin-top: 15px;">
                        <div class="korean-sentence">${word.example}</div>
                        <div style="font-size: 0.9em; color: #666;">${word.exampleTranslation}</div>
                    </div>
                `;
            } else {
                content.innerHTML = `
                    <div class="health-emoji">${word.emoji}</div>
                    <div class="korean-word">${word.korean}</div>
                    <button class="speak-btn" onclick="speak('${word.korean}')">üîä –°–ª–æ–≤–æ</button>
                `;
            }
            
            document.getElementById('card-counter').textContent = `${currentCardIndex + 1} / ${vocabulary.length}`;
        }
        
        function flipCard() {
            isFlipped = !isFlipped;
            const flashcard = document.getElementById('flashcard');
            flashcard.style.transform = isFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)';
            setTimeout(() => {
                updateFlashcard();
                flashcard.style.transform = 'rotateY(0deg)';
            }, 150);
        }
        
        function nextCard() {
            currentCardIndex = (currentCardIndex + 1) % vocabulary.length;
            isFlipped = false;
            updateFlashcard();
        }
        
        function prevCard() {
            currentCardIndex = (currentCardIndex - 1 + vocabulary.length) % vocabulary.length;
            isFlipped = false;
            updateFlashcard();
        }
        
        function updateActiveButton(index) {
            const buttons = document.querySelectorAll('.mode-btn');
            buttons.forEach((btn, i) => {
                if (i === index) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }
        
        function showTests() {
            document.getElementById('vocabulary-section').style.display = 'none';
            document.getElementById('flashcard-section').style.display = 'none';
            document.getElementById('test-section').style.display = 'block';
            document.getElementById('filter-section').style.display = 'none';
            updateActiveButton(2);
        }
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
        let currentTest = null;
        let currentQuestionIndex = 0;
        let testQuestions = [];
        let correctAnswers = 0;
        let userAnswers = [];
        let isAnswered = false;
        
        function startTest(type) {
            currentTest = type;
            currentQuestionIndex = 0;
            correctAnswers = 0;
            userAnswers = [];
            isAnswered = false;
            
            document.querySelectorAll('.test-type-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            generateTestQuestions(type);
            
            document.getElementById('test-content').style.display = 'block';
            document.getElementById('test-result').style.display = 'none';
            
            showQuestion();
        }
        
        function generateTestQuestions(type) {
            const shuffled = [...vocabulary].sort(() => 0.5 - Math.random());
            testQuestions = shuffled.slice(0, 10);
            
            testQuestions.forEach((question, index) => {
                if (type === 'multiple') {
                    const wrongAnswers = vocabulary
                        .filter(w => w.korean !== question.korean)
                        .sort(() => 0.5 - Math.random())
                        .slice(0, 3)
                        .map(w => w.translation);
                    
                    question.options = [question.translation, ...wrongAnswers]
                        .sort(() => 0.5 - Math.random());
                    question.correctAnswer = question.translation;
                } else if (type === 'context') {
                    const wrongWords = vocabulary
                        .filter(w => w.korean !== question.korean && w.category === question.category)
                        .sort(() => 0.5 - Math.random())
                        .slice(0, 3)
                        .map(w => w.korean);
                    
                    question.options = [question.korean, ...wrongWords]
                        .sort(() => 0.5 - Math.random());
                    question.correctAnswer = question.korean;
                }
            });
        }
        
        function showQuestion() {
            const question = testQuestions[currentQuestionIndex];
            const questionEl = document.getElementById('test-question');
            const answersEl = document.getElementById('test-answers');
            const controlsEl = document.getElementById('test-controls');
            
            document.getElementById('test-progress').textContent = 
                `–í–æ–ø—Ä–æ—Å ${currentQuestionIndex + 1} –∏–∑ ${testQuestions.length}`;
            document.getElementById('test-score').textContent = 
                `–ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correctAnswers} / ${currentQuestionIndex}`;
            
            isAnswered = false;
            controlsEl.style.display = 'none';
            
            if (currentTest === 'multiple') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 15px;">
                        –ö–∞–∫ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ç–µ—Ä–º–∏–Ω: <strong style="color: #e17055;">${question.korean}</strong> <button class="speak-btn" onclick="speak('${question.korean}')">üîä</button>
                    </div>
                    <div style="font-style: italic; color: #666;">[${question.pronunciation}]</div>
                `;
                
                answersEl.innerHTML = question.options.map(option => 
                    `<div class="answer-option" onclick="selectAnswer('${option}', '${question.correctAnswer}')">${option}</div>`
                ).join('');
                
            } else if (currentTest === 'input') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 15px;">
                        –ù–∞–ø–∏—à–∏—Ç–µ –∫–æ—Ä–µ–π—Å–∫–∏–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ç–µ—Ä–º–∏–Ω: <strong style="color: #e17055;">${question.translation}</strong>
                    </div>
                    <div style="font-style: italic; color: #666;">–ü—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ: [${question.pronunciation}]</div>
                `;
                
                answersEl.innerHTML = `
                    <input type="text" class="answer-input" id="answer-input" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä–µ–π—Å–∫–æ–µ —Å–ª–æ–≤–æ..." 
                           onkeypress="if(event.key==='Enter') checkInputAnswer('${question.korean}')">
                    <button class="mode-btn" onclick="checkInputAnswer('${question.korean}')">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                `;
                
            } else if (currentTest === 'context') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 15px;">
                        –ö–∞–∫–æ–µ —Å–ª–æ–≤–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –≤ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏:
                    </div>
                    <div style="font-size: 1.1em; padding: 15px; background: #fff5f5; border-radius: 8px; margin: 15px 0;">
                        ${question.example.replace(question.korean, '<strong style="color: #d63031;">[ ? ]</strong>')}
                    </div>
                    <div style="font-style: italic; color: #666;">${question.exampleTranslation}</div>
                `;
                
                answersEl.innerHTML = question.options.map(option => 
                    `<div class="answer-option" onclick="selectAnswer('${option}', '${question.correctAnswer}')">
                        ${option} <button class="speak-btn" onclick="speak('${option}')">üîä</button>
                    </div>`
                ).join('');
                
            } else if (currentTest === 'listening') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 20px;">
                        –ü—Ä–æ—Å–ª—É—à–∞–π—Ç–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ç–µ—Ä–º–∏–Ω –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥:
                    </div>
                    <button class="mode-btn" onclick="speak('${question.korean}')" 
                            style="font-size: 1.5em; padding: 20px 40px; margin: 20px;">üîä –ü—Ä–æ—Å–ª—É—à–∞—Ç—å</button>
                `;
                
                const wrongAnswers = vocabulary
                    .filter(w => w.korean !== question.korean)
                    .sort(() => 0.5 - Math.random())
                    .slice(0, 3)
                    .map(w => w.translation);
                
                const options = [question.translation, ...wrongAnswers]
                    .sort(() => 0.5 - Math.random());
                
                answersEl.innerHTML = options.map(option => 
                    `<div class="answer-option" onclick="selectAnswer('${option}', '${question.translation}')">${option}</div>`
                ).join('');
            }
        }
        
        function selectAnswer(selected, correct) {
            if (isAnswered) return;
            
            isAnswered = true;
            const isCorrect = selected === correct;
            
            if (isCorrect) {
                correctAnswers++;
            }
            
            userAnswers.push({
                question: testQuestions[currentQuestionIndex],
                selected: selected,
                correct: correct,
                isCorrect: isCorrect
            });
            
            document.querySelectorAll('.answer-option').forEach(option => {
                if (option.textContent.trim().startsWith(correct)) {
                    option.classList.add('correct');
                } else if (option.textContent.trim().startsWith(selected) && !isCorrect) {
                    option.classList.add('incorrect');
                }
                option.style.pointerEvents = 'none';
            });
            
            const feedback = document.createElement('div');
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.innerHTML = isCorrect ? 
                '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!' : 
                `‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correct}`;
            
            document.getElementById('test-answers').appendChild(feedback);
            document.getElementById('test-controls').style.display = 'block';
            
            document.getElementById('test-score').textContent = 
                `–ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correctAnswers} / ${currentQuestionIndex + 1}`;
        }
        
        function checkInputAnswer(correct) {
            if (isAnswered) return;
            
            const input = document.getElementById('answer-input');
            const userAnswer = input.value.trim();
            const isCorrect = userAnswer === correct;
            
            isAnswered = true;
            
            if (isCorrect) {
                correctAnswers++;
            }
            
            userAnswers.push({
                question: testQuestions[currentQuestionIndex],
                selected: userAnswer,
                correct: correct,
                isCorrect: isCorrect
            });
            
            const feedback = document.createElement('div');
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.innerHTML = isCorrect ? 
                '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!' : 
                `‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correct}`;
            
            document.getElementById('test-answers').appendChild(feedback);
            
            input.disabled = true;
            document.getElementById('test-controls').style.display = 'block';
            
            document.getElementById('test-score').textContent = 
                `–ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correctAnswers} / ${currentQuestionIndex + 1}`;
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < testQuestions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }
        
        function showResult() {
            const percentage = Math.round((correctAnswers / testQuestions.length) * 100);
            
            document.getElementById('test-content').style.display = 'none';
            document.getElementById('test-result').style.display = 'block';
            
            document.getElementById('final-score').textContent = 
                `${correctAnswers} –∏–∑ ${testQuestions.length}`;
            document.getElementById('final-percentage').textContent = `${percentage}%`;
            
            const scoreEl = document.getElementById('final-score');
            const percentageEl = document.getElementById('final-percentage');
            
            if (percentage >= 80) {
                scoreEl.style.color = '#00b894';
                percentageEl.style.color = '#00b894';
            } else if (percentage >= 60) {
                scoreEl.style.color = '#fdcb6e';
                percentageEl.style.color = '#fdcb6e';
            } else {
                scoreEl.style.color = '#d63031';
                percentageEl.style.color = '#d63031';
            }
        }
        
        function restartTest() {
            if (currentTest) {
                startTest(currentTest);
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            loadVocabulary();
            updateFlashcard();
        });
        
        // –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('flashcard-section').style.display !== 'none') {
                if (e.code === 'Space') {
                    e.preventDefault();
                    flipCard();
                } else if (e.code === 'ArrowRight') {
                    nextCard();
                } else if (e.code === 'ArrowLeft') {
                    prevCard();
                }
            }
        });
    </script>
</body>
</html>