<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Урок 21: Здоровье и медицина (건강과 의학)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e17055, #81ecec, #74b9ff, #a29bfe);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .nav {
            background: rgba(255,255,255,0.95);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .nav a {
            background: #e17055;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 10px;
            margin: 0 10px;
            display: inline-block;
            transition: all 0.3s;
        }
        
        .nav a:hover {
            background: #d63031;
            transform: translateY(-2px);
        }
        
        .lesson-header {
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .lesson-header h1 {
            font-size: 2.5em;
            color: #e17055;
            margin-bottom: 10px;
        }
        
        .health-pulse {
            position: relative;
            width: 300px;
            height: 100px;
            margin: 20px auto;
            overflow: hidden;
            border-radius: 15px;
            background: linear-gradient(to bottom, #f8f9fa, #e8f4fd);
        }
        
        .pulse-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: #e17055;
            top: 50%;
            animation: heartbeat 2s ease-in-out infinite;
        }
        
        .health-icons {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .health-icon {
            position: absolute;
            font-size: 2em;
            animation: float-health 4s ease-in-out infinite;
        }
        
        .health1 {
            top: 20px;
            left: 10%;
            animation-delay: 0s;
        }
        
        .health2 {
            top: 60px;
            left: 30%;
            animation-delay: -1s;
        }
        
        .health3 {
            top: 10px;
            left: 50%;
            animation-delay: -2s;
        }
        
        .health4 {
            top: 70px;
            left: 70%;
            animation-delay: -3s;
        }
        
        .health5 {
            top: 30px;
            left: 90%;
            animation-delay: -4s;
        }
        
        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .health-card {
            background: rgba(255,255,255,0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .health-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--card-color, #e17055);
        }
        
        .health-card.body::before { background: linear-gradient(90deg, #e17055, #d63031); }
        .health-card.symptoms::before { background: linear-gradient(90deg, #74b9ff, #0984e3); }
        .health-card.treatment::before { background: linear-gradient(90deg, #00b894, #00cec9); }
        .health-card.medicine::before { background: linear-gradient(90deg, #a29bfe, #6c5ce7); }
        .health-card.wellness::before { background: linear-gradient(90deg, #fdcb6e, #e17055); }
        
        .health-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .health-emoji {
            font-size: 3em;
            text-align: center;
            margin-bottom: 10px;
            animation: health-beat 3s ease-in-out infinite;
        }
        
        .korean-word {
            font-size: 1.8em;
            font-weight: bold;
            color: #e17055;
            margin-bottom: 5px;
            text-align: center;
        }
        
        .pronunciation {
            font-size: 1.1em;
            color: #74b9ff;
            margin-bottom: 10px;
            font-style: italic;
            text-align: center;
        }
        
        .translation {
            font-size: 1em;
            color: #666;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .medical-note {
            background: #f0f8ff;
            padding: 8px;
            border-radius: 6px;
            font-size: 0.85em;
            color: #74b9ff;
            margin: 8px 0;
            border-left: 3px solid #e17055;
        }
        
        .example-sentence {
            background: #fff5f5;
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid #e17055;
            font-size: 0.9em;
        }
        
        .korean-sentence {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .speak-btn {
            background: #e17055;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
            font-size: 0.9em;
            color: white;
        }
        
        .speak-btn:hover {
            background: #d63031;
        }
        
        .study-mode {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .mode-btn {
            background: #e17055;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mode-btn.active {
            background: #74b9ff;
        }
        
        .filter-section {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            background: rgba(255,255,255,0.9);
            border: 2px solid #ddd;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-btn.active {
            background: #e17055;
            color: white;
            border-color: #e17055;
        }
        
        .health-tips {
            background: rgba(255,255,255,0.95);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .health-tip {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px;
            border-radius: 10px;
            border-left: 4px solid #e17055;
            display: inline-block;
            min-width: 250px;
            text-align: left;
        }
        
        .flashcard {
            background: rgba(255,255,255,0.95);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 20px;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .flashcard:hover {
            transform: rotateY(3deg) scale(1.02);
        }
        
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        
        .flashcard::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #e17055, #d63031);
            border-radius: 20px 20px 0 0;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scaleX(1); }
            50% { transform: scaleX(1.1); }
        }
        
        @keyframes float-health {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes health-beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        /* Стили для тестов */
        .test-container {
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .test-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .test-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .test-type-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            color: #495057;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .test-type-btn.active,
        .test-type-btn:hover {
            background: #e17055;
            color: white;
            border-color: #e17055;
            transform: translateY(-2px);
        }
        
        .test-content {
            min-height: 300px;
        }
        
        .test-question {
            font-size: 1.4em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
            color: #e17055;
            padding: 20px;
            background: #fff5f5;
            border-radius: 10px;
            border-left: 4px solid #e17055;
        }
        
        .test-answers {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .answer-option {
            background: white;
            border: 2px solid #dee2e6;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            text-align: center;
        }
        
        .answer-option:hover {
            border-color: #e17055;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .answer-option.selected {
            background: #e17055;
            color: white;
            border-color: #e17055;
        }
        
        .answer-option.correct {
            background: #00b894;
            color: white;
            border-color: #00b894;
        }
        
        .answer-option.incorrect {
            background: #d63031;
            color: white;
            border-color: #d63031;
        }
        
        .answer-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .answer-input:focus {
            outline: none;
            border-color: #e17055;
        }
        
        .test-controls {
            text-align: center;
            margin-top: 20px;
        }
        
        .test-result {
            text-align: center;
            background: rgba(255,255,255,0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .result-stats {
            margin: 30px 0;
        }
        
        .result-score {
            font-size: 2em;
            font-weight: bold;
            color: #e17055;
            margin-bottom: 10px;
        }
        
        .result-percentage {
            font-size: 1.5em;
            color: #74b9ff;
        }
        
        .result-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
            text-align: center;
        }
        
        .feedback.correct {
            background: #d1f2eb;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav">
            <a href="../index.html">← К 4급</a>
            <a href="../../index.html">🏠 Главная</a>
        </div>
        
        <div class="lesson-header">
            <h1>🏥 Урок 21: Здоровье и медицина (건강과 의학)</h1>
            <p>Изучаем медицинскую терминологию и здоровый образ жизни</p>
            
            <div class="health-pulse">
                <div class="pulse-line"></div>
                <div class="health-icons">
                    <div class="health-icon health1">❤️</div>
                    <div class="health-icon health2">🩺</div>
                    <div class="health-icon health3">💊</div>
                    <div class="health-icon health4">🏥</div>
                    <div class="health-icon health5">⚕️</div>
                </div>
            </div>
        </div>
        
        <div class="health-tips">
            <h3>💡 Полезные советы для здоровья</h3>
            <div class="health-tip">
                <strong>규칙적인 운동 (Regular exercise)</strong><br>
                Регулярные физические упражнения укрепляют здоровье
            </div>
            <div class="health-tip">
                <strong>균형 잡힌 식사 (Balanced diet)</strong><br>
                Сбалансированное питание - основа здоровья
            </div>
            <div class="health-tip">
                <strong>충분한 수면 (Adequate sleep)</strong><br>
                Достаточный сон восстанавливает организм
            </div>
        </div>
        
        <div class="study-mode">
            <button class="mode-btn active" onclick="showVocabulary()">📚 Медицинский словарь</button>
            <button class="mode-btn" onclick="showFlashcards()">🃏 Карточки</button>
            <button class="mode-btn" onclick="showTests()">🧩 Медицинские тесты</button>
        </div>
        
        <div class="filter-section" id="filter-section">
            <button class="filter-btn active" onclick="filterHealth('all')">Все</button>
            <button class="filter-btn" onclick="filterHealth('body')">👤 Тело</button>
            <button class="filter-btn" onclick="filterHealth('symptoms')">🤒 Симптомы</button>
            <button class="filter-btn" onclick="filterHealth('treatment')">🏥 Лечение</button>
            <button class="filter-btn" onclick="filterHealth('medicine')">💊 Лекарства</button>
            <button class="filter-btn" onclick="filterHealth('wellness')">💪 Здоровье</button>
        </div>
        
        <div id="vocabulary-section">
            <div class="vocabulary-grid" id="vocabularyGrid">
                <!-- Будет заполнено JS -->
            </div>
        </div>
        
        <div id="flashcard-section" style="display: none;">
            <div class="flashcard" id="flashcard" onclick="flipCard()">
                <div id="flashcard-content">
                    <div class="health-emoji" id="flashcard-emoji">🏥</div>
                    <div class="korean-word" id="flashcard-korean">병원</div>
                    <button class="speak-btn" onclick="speak(document.getElementById('flashcard-korean').textContent)">🔊</button>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="mode-btn" onclick="prevCard()">← Предыдущая</button>
                <span id="card-counter">1 / 25</span>
                <button class="mode-btn" onclick="nextCard()">Следующая →</button>
            </div>
            <div style="text-align: center; margin-top: 10px; color: #666;">
                <small>Нажмите на карточку для переворота или используйте Пробел</small>
            </div>
        </div>
        
        <div id="test-section" style="display: none;">
            <div class="test-container">
                <div class="test-header">
                    <h3>🧩 Медицинские тесты</h3>
                    <div class="test-stats">
                        <span id="test-score">Правильно: 0 / 0</span>
                        <span id="test-progress">Вопрос 1 из 10</span>
                    </div>
                </div>
                
                <div class="test-selector">
                    <button class="test-type-btn active" onclick="startTest('multiple')">📋 Перевод терминов</button>
                    <button class="test-type-btn" onclick="startTest('input')">✏️ Ввод слова</button>
                    <button class="test-type-btn" onclick="startTest('context')">📝 Медицинские ситуации</button>
                    <button class="test-type-btn" onclick="startTest('listening')">👂 Произношение</button>
                </div>
                
                <div id="test-content" class="test-content">
                    <div class="test-question" id="test-question">
                        Выберите тип теста выше
                    </div>
                    <div class="test-answers" id="test-answers">
                        <!-- Будет заполнено JS -->
                    </div>
                    <div class="test-controls" id="test-controls" style="display: none;">
                        <button class="mode-btn" onclick="nextQuestion()">Следующий вопрос →</button>
                        <button class="mode-btn" onclick="showResult()">Показать результат</button>
                    </div>
                </div>
                
                <div id="test-result" class="test-result" style="display: none;">
                    <h3>🎉 Результат теста</h3>
                    <div class="result-stats">
                        <div class="result-score" id="final-score"></div>
                        <div class="result-percentage" id="final-percentage"></div>
                    </div>
                    <div class="result-actions">
                        <button class="mode-btn" onclick="restartTest()">🔄 Пройти ещё раз</button>
                        <button class="mode-btn" onclick="showVocabulary()">📚 К словарю</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const vocabulary = [
            // Тело
            {
                korean: '몸', 
                pronunciation: 'мом', 
                translation: 'тело',
                emoji: '👤',
                category: 'body',
                example: '몸이 아프면 병원에 가세요',
                exampleTranslation: 'Если болит тело, идите в больницу',
                medicalNote: 'Общее понятие для всего организма'
            },
            {
                korean: '머리', 
                pronunciation: 'мори', 
                translation: 'голова',
                emoji: '🧠',
                category: 'body',
                example: '머리가 아파요',
                exampleTranslation: 'У меня болит голова',
                medicalNote: 'Часто связано со стрессом или усталостью'
            },
            {
                korean: '심장', 
                pronunciation: 'симджан', 
                translation: 'сердце',
                emoji: '❤️',
                category: 'body',
                example: '심장이 빨리 뛰어요',
                exampleTranslation: 'Сердце быстро бьётся',
                medicalNote: 'Центральный орган кровообращения'
            },
            {
                korean: '폐', 
                pronunciation: 'пхе', 
                translation: 'лёгкие',
                emoji: '🫁',
                category: 'body',
                example: '폐 건강이 중요해요',
                exampleTranslation: 'Здоровье лёгких важно',
                medicalNote: 'Орган дыхательной системы'
            },
            {
                korean: '위', 
                pronunciation: 'ви', 
                translation: 'желудок',
                emoji: '🫃',
                category: 'body',
                example: '위가 아프면 약을 드세요',
                exampleTranslation: 'Если болит желудок, примите лекарство',
                medicalNote: 'Основной орган пищеварения'
            },
            
            // Симптомы
            {
                korean: '아프다', 
                pronunciation: 'апхыда', 
                translation: 'болеть',
                emoji: '😣',
                category: 'symptoms',
                example: '배가 아파요',
                exampleTranslation: 'У меня болит живот',
                medicalNote: 'Общий симптом различных заболеваний'
            },
            {
                korean: '열', 
                pronunciation: 'ёль', 
                translation: 'лихорадка, температура',
                emoji: '🤒',
                category: 'symptoms',
                example: '열이 나요',
                exampleTranslation: 'У меня температура',
                medicalNote: 'Защитная реакция организма на инфекцию'
            },
            {
                korean: '기침', 
                pronunciation: 'кичхим', 
                translation: 'кашель',
                emoji: '😷',
                category: 'symptoms',
                example: '기침이 심해요',
                exampleTranslation: 'У меня сильный кашель',
                medicalNote: 'Может быть симптомом простуды или аллергии'
            },
            {
                korean: '두통', 
                pronunciation: 'дутхон', 
                translation: 'головная боль',
                emoji: '🤕',
                category: 'symptoms',
                example: '두통이 있어요',
                exampleTranslation: 'У меня головная боль',
                medicalNote: 'Часто связана со стрессом или напряжением'
            },
            {
                korean: '피곤하다', 
                pronunciation: 'пхигонада', 
                translation: 'уставать',
                emoji: '😴',
                category: 'symptoms',
                example: '요즘 너무 피곤해요',
                exampleTranslation: 'В последнее время очень устаю',
                medicalNote: 'Может указывать на переутомление или болезнь'
            },
            
            // Лечение
            {
                korean: '병원', 
                pronunciation: 'пёнвон', 
                translation: 'больница',
                emoji: '🏥',
                category: 'treatment',
                example: '병원에서 검사를 받았어요',
                exampleTranslation: 'Прошёл обследование в больнице',
                medicalNote: 'Место оказания медицинской помощи'
            },
            {
                korean: '의사', 
                pronunciation: 'ыйса', 
                translation: 'врач',
                emoji: '👨‍⚕️',
                category: 'treatment',
                example: '의사선생님께 진료를 받아요',
                exampleTranslation: 'Получаю лечение у врача',
                medicalNote: 'Специалист по диагностике и лечению'
            },
            {
                korean: '간호사', 
                pronunciation: 'канхоса', 
                translation: 'медсестра',
                emoji: '👩‍⚕️',
                category: 'treatment',
                example: '간호사가 주사를 놓아요',
                exampleTranslation: 'Медсестра делает укол',
                medicalNote: 'Помощник врача в лечении пациентов'
            },
            {
                korean: '수술', 
                pronunciation: 'сусуль', 
                translation: 'операция',
                emoji: '🔬',
                category: 'treatment',
                example: '내일 수술을 받아요',
                exampleTranslation: 'Завтра делают операцию',
                medicalNote: 'Хирургическое вмешательство для лечения'
            },
            {
                korean: '치료', 
                pronunciation: 'чхирё', 
                translation: 'лечение',
                emoji: '💉',
                category: 'treatment',
                example: '치료를 받고 있어요',
                exampleTranslation: 'Прохожу лечение',
                medicalNote: 'Процесс восстановления здоровья'
            },
            
            // Лекарства
            {
                korean: '약', 
                pronunciation: 'як', 
                translation: 'лекарство',
                emoji: '💊',
                category: 'medicine',
                example: '약을 먹었어요',
                exampleTranslation: 'Принял лекарство',
                medicalNote: 'Средство для лечения болезней'
            },
            {
                korean: '진통제', 
                pronunciation: 'чинтхонджэ', 
                translation: 'обезболивающее',
                emoji: '💉',
                category: 'medicine',
                example: '진통제를 먹으면 아픔이 줄어요',
                exampleTranslation: 'Если принять обезболивающее, боль уменьшится',
                medicalNote: 'Лекарство для снятия боли'
            },
            {
                korean: '항생제', 
                pronunciation: 'хансэнджэ', 
                translation: 'антибиотик',
                emoji: '💊',
                category: 'medicine',
                example: '항생제는 의사 처방이 필요해요',
                exampleTranslation: 'Для антибиотиков нужен рецепт врача',
                medicalNote: 'Препарат против бактериальных инфекций'
            },
            {
                korean: '비타민', 
                pronunciation: 'битхамин', 
                translation: 'витамины',
                emoji: '🍊',
                category: 'medicine',
                example: '비타민을 매일 먹어요',
                exampleTranslation: 'Принимаю витамины каждый день',
                medicalNote: 'Необходимые для организма питательные вещества'
            },
            {
                korean: '연고', 
                pronunciation: 'ёнго', 
                translation: 'мазь',
                emoji: '🧴',
                category: 'medicine',
                example: '상처에 연고를 발라요',
                exampleTranslation: 'Наношу мазь на рану',
                medicalNote: 'Наружное лекарственное средство'
            },
            
            // Здоровье
            {
                korean: '건강', 
                pronunciation: 'конган', 
                translation: 'здоровье',
                emoji: '💪',
                category: 'wellness',
                example: '건강이 최고의 재산이에요',
                exampleTranslation: 'Здоровье - самое большое богатство',
                medicalNote: 'Состояние полного благополучия организма'
            },
            {
                korean: '운동', 
                pronunciation: 'ундон', 
                translation: 'физические упражнения',
                emoji: '🏃‍♂️',
                category: 'wellness',
                example: '매일 운동을 해요',
                exampleTranslation: 'Занимаюсь спортом каждый день',
                medicalNote: 'Важно для поддержания физической формы'
            },
            {
                korean: '다이어트', 
                pronunciation: 'даиотхы', 
                translation: 'диета',
                emoji: '🥗',
                category: 'wellness',
                example: '다이어트를 하고 있어요',
                exampleTranslation: 'Сижу на диете',
                medicalNote: 'Режим питания для здоровья или похудения'
            },
            {
                korean: '금연', 
                pronunciation: 'кымён', 
                translation: 'отказ от курения',
                emoji: '🚭',
                category: 'wellness',
                example: '금연을 시작했어요',
                exampleTranslation: 'Начал бросать курить',
                medicalNote: 'Важно для здоровья лёгких и сердца'
            },
            {
                korean: '스트레스', 
                pronunciation: 'сытхырэсы', 
                translation: 'стресс',
                emoji: '😰',
                category: 'wellness',
                example: '스트레스를 받지 마세요',
                exampleTranslation: 'Не стрессуйте',
                medicalNote: 'Может негативно влиять на здоровье'
            },
            {
                korean: '명상', 
                pronunciation: 'мёнсан', 
                translation: 'медитация',
                emoji: '🧘‍♀️',
                category: 'wellness',
                example: '명상을 하면 마음이 편해져요',
                exampleTranslation: 'Медитация успокаивает душу',
                medicalNote: 'Помогает снизить стресс и улучшить концентрацию'
            }
        ];
        
        let filteredVocabulary = vocabulary;
        let currentCardIndex = 0;
        let isFlipped = false;
        
        function loadVocabulary() {
            const grid = document.getElementById('vocabularyGrid');
            grid.innerHTML = '';
            
            filteredVocabulary.forEach((word, index) => {
                const card = document.createElement('div');
                card.className = `health-card ${word.category}`;
                card.innerHTML = `
                    <div class="health-emoji">${word.emoji}</div>
                    <div class="korean-word">${word.korean}</div>
                    <div class="pronunciation">${word.pronunciation}</div>
                    <div class="translation">${word.translation}</div>
                    <div class="medical-note">⚕️ ${word.medicalNote}</div>
                    <div class="example-sentence">
                        <div class="korean-sentence">${word.example}</div>
                        <div>${word.exampleTranslation}</div>
                    </div>
                    <button class="speak-btn" onclick="speak('${word.korean}')">🔊 Слово</button>
                    <button class="speak-btn" onclick="speak('${word.example}')">🔊 Пример</button>
                `;
                grid.appendChild(card);
                
                // Анимация появления
                setTimeout(() => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'all 0.5s ease';
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 50);
                }, index * 100);
            });
        }
        
        function filterHealth(category) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (category === 'all') {
                filteredVocabulary = vocabulary;
            } else {
                filteredVocabulary = vocabulary.filter(word => word.category === category);
            }
            
            loadVocabulary();
        }
        
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ko-KR';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }
        
        function showVocabulary() {
            document.getElementById('vocabulary-section').style.display = 'block';
            document.getElementById('flashcard-section').style.display = 'none';
            document.getElementById('filter-section').style.display = 'flex';
            updateActiveButton(0);
        }
        
        function showFlashcards() {
            document.getElementById('vocabulary-section').style.display = 'none';
            document.getElementById('flashcard-section').style.display = 'block';
            document.getElementById('filter-section').style.display = 'none';
            updateActiveButton(1);
            updateFlashcard();
        }
        
        function updateFlashcard() {
            const word = vocabulary[currentCardIndex];
            const flashcard = document.getElementById('flashcard');
            const content = document.getElementById('flashcard-content');
            
            if (isFlipped) {
                content.innerHTML = `
                    <div class="health-emoji">${word.emoji}</div>
                    <div class="pronunciation">${word.pronunciation}</div>
                    <div class="translation">${word.translation}</div>
                    <div class="medical-note" style="margin: 15px 0; max-width: 300px;">⚕️ ${word.medicalNote}</div>
                    <div class="example-sentence" style="margin-top: 15px;">
                        <div class="korean-sentence">${word.example}</div>
                        <div style="font-size: 0.9em; color: #666;">${word.exampleTranslation}</div>
                    </div>
                `;
            } else {
                content.innerHTML = `
                    <div class="health-emoji">${word.emoji}</div>
                    <div class="korean-word">${word.korean}</div>
                    <button class="speak-btn" onclick="speak('${word.korean}')">🔊 Слово</button>
                `;
            }
            
            document.getElementById('card-counter').textContent = `${currentCardIndex + 1} / ${vocabulary.length}`;
        }
        
        function flipCard() {
            isFlipped = !isFlipped;
            const flashcard = document.getElementById('flashcard');
            flashcard.style.transform = isFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)';
            setTimeout(() => {
                updateFlashcard();
                flashcard.style.transform = 'rotateY(0deg)';
            }, 150);
        }
        
        function nextCard() {
            currentCardIndex = (currentCardIndex + 1) % vocabulary.length;
            isFlipped = false;
            updateFlashcard();
        }
        
        function prevCard() {
            currentCardIndex = (currentCardIndex - 1 + vocabulary.length) % vocabulary.length;
            isFlipped = false;
            updateFlashcard();
        }
        
        function updateActiveButton(index) {
            const buttons = document.querySelectorAll('.mode-btn');
            buttons.forEach((btn, i) => {
                if (i === index) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }
        
        function showTests() {
            document.getElementById('vocabulary-section').style.display = 'none';
            document.getElementById('flashcard-section').style.display = 'none';
            document.getElementById('test-section').style.display = 'block';
            document.getElementById('filter-section').style.display = 'none';
            updateActiveButton(2);
        }
        
        // Переменные для тестов
        let currentTest = null;
        let currentQuestionIndex = 0;
        let testQuestions = [];
        let correctAnswers = 0;
        let userAnswers = [];
        let isAnswered = false;
        
        function startTest(type) {
            currentTest = type;
            currentQuestionIndex = 0;
            correctAnswers = 0;
            userAnswers = [];
            isAnswered = false;
            
            document.querySelectorAll('.test-type-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            generateTestQuestions(type);
            
            document.getElementById('test-content').style.display = 'block';
            document.getElementById('test-result').style.display = 'none';
            
            showQuestion();
        }
        
        function generateTestQuestions(type) {
            const shuffled = [...vocabulary].sort(() => 0.5 - Math.random());
            testQuestions = shuffled.slice(0, 10);
            
            testQuestions.forEach((question, index) => {
                if (type === 'multiple') {
                    const wrongAnswers = vocabulary
                        .filter(w => w.korean !== question.korean)
                        .sort(() => 0.5 - Math.random())
                        .slice(0, 3)
                        .map(w => w.translation);
                    
                    question.options = [question.translation, ...wrongAnswers]
                        .sort(() => 0.5 - Math.random());
                    question.correctAnswer = question.translation;
                } else if (type === 'context') {
                    const wrongWords = vocabulary
                        .filter(w => w.korean !== question.korean && w.category === question.category)
                        .sort(() => 0.5 - Math.random())
                        .slice(0, 3)
                        .map(w => w.korean);
                    
                    question.options = [question.korean, ...wrongWords]
                        .sort(() => 0.5 - Math.random());
                    question.correctAnswer = question.korean;
                }
            });
        }
        
        function showQuestion() {
            const question = testQuestions[currentQuestionIndex];
            const questionEl = document.getElementById('test-question');
            const answersEl = document.getElementById('test-answers');
            const controlsEl = document.getElementById('test-controls');
            
            document.getElementById('test-progress').textContent = 
                `Вопрос ${currentQuestionIndex + 1} из ${testQuestions.length}`;
            document.getElementById('test-score').textContent = 
                `Правильно: ${correctAnswers} / ${currentQuestionIndex}`;
            
            isAnswered = false;
            controlsEl.style.display = 'none';
            
            if (currentTest === 'multiple') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 15px;">
                        Как переводится медицинский термин: <strong style="color: #e17055;">${question.korean}</strong> <button class="speak-btn" onclick="speak('${question.korean}')">🔊</button>
                    </div>
                    <div style="font-style: italic; color: #666;">[${question.pronunciation}]</div>
                `;
                
                answersEl.innerHTML = question.options.map(option => 
                    `<div class="answer-option" onclick="selectAnswer('${option}', '${question.correctAnswer}')">${option}</div>`
                ).join('');
                
            } else if (currentTest === 'input') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 15px;">
                        Напишите корейский медицинский термин: <strong style="color: #e17055;">${question.translation}</strong>
                    </div>
                    <div style="font-style: italic; color: #666;">Произношение: [${question.pronunciation}]</div>
                `;
                
                answersEl.innerHTML = `
                    <input type="text" class="answer-input" id="answer-input" 
                           placeholder="Введите корейское слово..." 
                           onkeypress="if(event.key==='Enter') checkInputAnswer('${question.korean}')">
                    <button class="mode-btn" onclick="checkInputAnswer('${question.korean}')">Проверить</button>
                `;
                
            } else if (currentTest === 'context') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 15px;">
                        Какое слово подходит в медицинской ситуации:
                    </div>
                    <div style="font-size: 1.1em; padding: 15px; background: #fff5f5; border-radius: 8px; margin: 15px 0;">
                        ${question.example.replace(question.korean, '<strong style="color: #d63031;">[ ? ]</strong>')}
                    </div>
                    <div style="font-style: italic; color: #666;">${question.exampleTranslation}</div>
                `;
                
                answersEl.innerHTML = question.options.map(option => 
                    `<div class="answer-option" onclick="selectAnswer('${option}', '${question.correctAnswer}')">
                        ${option} <button class="speak-btn" onclick="speak('${option}')">🔊</button>
                    </div>`
                ).join('');
                
            } else if (currentTest === 'listening') {
                questionEl.innerHTML = `
                    <div style="font-size: 1.2em; margin-bottom: 20px;">
                        Прослушайте медицинский термин и выберите правильный перевод:
                    </div>
                    <button class="mode-btn" onclick="speak('${question.korean}')" 
                            style="font-size: 1.5em; padding: 20px 40px; margin: 20px;">🔊 Прослушать</button>
                `;
                
                const wrongAnswers = vocabulary
                    .filter(w => w.korean !== question.korean)
                    .sort(() => 0.5 - Math.random())
                    .slice(0, 3)
                    .map(w => w.translation);
                
                const options = [question.translation, ...wrongAnswers]
                    .sort(() => 0.5 - Math.random());
                
                answersEl.innerHTML = options.map(option => 
                    `<div class="answer-option" onclick="selectAnswer('${option}', '${question.translation}')">${option}</div>`
                ).join('');
            }
        }
        
        function selectAnswer(selected, correct) {
            if (isAnswered) return;
            
            isAnswered = true;
            const isCorrect = selected === correct;
            
            if (isCorrect) {
                correctAnswers++;
            }
            
            userAnswers.push({
                question: testQuestions[currentQuestionIndex],
                selected: selected,
                correct: correct,
                isCorrect: isCorrect
            });
            
            document.querySelectorAll('.answer-option').forEach(option => {
                if (option.textContent.trim().startsWith(correct)) {
                    option.classList.add('correct');
                } else if (option.textContent.trim().startsWith(selected) && !isCorrect) {
                    option.classList.add('incorrect');
                }
                option.style.pointerEvents = 'none';
            });
            
            const feedback = document.createElement('div');
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.innerHTML = isCorrect ? 
                '✅ Правильно!' : 
                `❌ Неправильно. Правильный ответ: ${correct}`;
            
            document.getElementById('test-answers').appendChild(feedback);
            document.getElementById('test-controls').style.display = 'block';
            
            document.getElementById('test-score').textContent = 
                `Правильно: ${correctAnswers} / ${currentQuestionIndex + 1}`;
        }
        
        function checkInputAnswer(correct) {
            if (isAnswered) return;
            
            const input = document.getElementById('answer-input');
            const userAnswer = input.value.trim();
            const isCorrect = userAnswer === correct;
            
            isAnswered = true;
            
            if (isCorrect) {
                correctAnswers++;
            }
            
            userAnswers.push({
                question: testQuestions[currentQuestionIndex],
                selected: userAnswer,
                correct: correct,
                isCorrect: isCorrect
            });
            
            const feedback = document.createElement('div');
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.innerHTML = isCorrect ? 
                '✅ Правильно!' : 
                `❌ Неправильно. Правильный ответ: ${correct}`;
            
            document.getElementById('test-answers').appendChild(feedback);
            
            input.disabled = true;
            document.getElementById('test-controls').style.display = 'block';
            
            document.getElementById('test-score').textContent = 
                `Правильно: ${correctAnswers} / ${currentQuestionIndex + 1}`;
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < testQuestions.length) {
                showQuestion();
            } else {
                showResult();
            }
        }
        
        function showResult() {
            const percentage = Math.round((correctAnswers / testQuestions.length) * 100);
            
            document.getElementById('test-content').style.display = 'none';
            document.getElementById('test-result').style.display = 'block';
            
            document.getElementById('final-score').textContent = 
                `${correctAnswers} из ${testQuestions.length}`;
            document.getElementById('final-percentage').textContent = `${percentage}%`;
            
            const scoreEl = document.getElementById('final-score');
            const percentageEl = document.getElementById('final-percentage');
            
            if (percentage >= 80) {
                scoreEl.style.color = '#00b894';
                percentageEl.style.color = '#00b894';
            } else if (percentage >= 60) {
                scoreEl.style.color = '#fdcb6e';
                percentageEl.style.color = '#fdcb6e';
            } else {
                scoreEl.style.color = '#d63031';
                percentageEl.style.color = '#d63031';
            }
        }
        
        function restartTest() {
            if (currentTest) {
                startTest(currentTest);
            }
        }
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            loadVocabulary();
            updateFlashcard();
        });
        
        // Горячие клавиши
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('flashcard-section').style.display !== 'none') {
                if (e.code === 'Space') {
                    e.preventDefault();
                    flipCard();
                } else if (e.code === 'ArrowRight') {
                    nextCard();
                } else if (e.code === 'ArrowLeft') {
                    prevCard();
                }
            }
        });
    </script>
</body>
</html>